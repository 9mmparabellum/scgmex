import{s as d,u as p,n as f}from"./index-CSPrBd4B.js";const l=["aprobado","modificado","comprometido","devengado","ejercido","pagado"],g=["estimado","modificado","devengado","recaudado"];function m(){return{aprobado:0,modificado:0,comprometido:0,devengado:0,ejercido:0,pagado:0}}function u(){return{estimado:0,modificado:0,devengado:0,recaudado:0}}function _(t,r,e,o){const i={};for(const s of t){const n=s[r];i[n]||(i[n]=o());const c=s.momento;e.includes(c)&&(i[n][c]+=Number(s.monto)||0)}return i}function y(t,r,e){const o=e();for(const i of t){const s=i.momento;r.includes(s)&&(o[s]+=Number(i.monto)||0)}return o}async function b(t,r){const{data:e,error:o}=await d.from("partida_egreso").select("*, clasificador:clasificador_presupuestal!clasificador_id(codigo, nombre), fuente:clasificador_presupuestal!fuente_id(codigo, nombre)").eq("ente_id",t).eq("ejercicio_id",r).order("clave");if(o)throw o;if(!e.length)return[];const i=e.map(a=>a.id),{data:s,error:n}=await d.from("movimiento_presupuestal_egreso").select("*").in("partida_id",i);if(n)throw n;const c=_(s,"partida_id",l,m);return e.map(a=>({...a,totales:c[a.id]||m()}))}async function v(t,r){const{data:e,error:o}=await d.from("partida_egreso").select("id").eq("ente_id",t).eq("ejercicio_id",r);if(o)throw o;if(!e.length)return m();const i=e.map(c=>c.id),{data:s,error:n}=await d.from("movimiento_presupuestal_egreso").select("momento, monto").in("partida_id",i);if(n)throw n;return y(s,l,m)}async function E(t,r){const{data:e,error:o}=await d.from("concepto_ingreso").select("*, clasificador:clasificador_presupuestal!clasificador_id(codigo, nombre)").eq("ente_id",t).eq("ejercicio_id",r).order("clave");if(o)throw o;if(!e.length)return[];const i=e.map(a=>a.id),{data:s,error:n}=await d.from("movimiento_presupuestal_ingreso").select("*").in("concepto_id",i);if(n)throw n;const c=_(s,"concepto_id",g,u);return e.map(a=>({...a,totales:c[a.id]||u()}))}async function I(t,r){const{data:e,error:o}=await d.from("concepto_ingreso").select("id").eq("ente_id",t).eq("ejercicio_id",r);if(o)throw o;if(!e.length)return u();const i=e.map(c=>c.id),{data:s,error:n}=await d.from("movimiento_presupuestal_ingreso").select("momento, monto").in("concepto_id",i);if(n)throw n;return y(s,g,u)}function q(){const{entePublico:t,ejercicioFiscal:r}=p(),e=t?.id,o=r?.id;return f({queryKey:["partidas_egreso",e,o],queryFn:()=>b(e,o),enabled:!!e&&!!o})}function w(){const{entePublico:t,ejercicioFiscal:r}=p(),e=t?.id,o=r?.id;return f({queryKey:["resumen_egresos",e,o],queryFn:()=>v(e,o),enabled:!!e&&!!o})}function j(){const{entePublico:t,ejercicioFiscal:r}=p(),e=t?.id,o=r?.id;return f({queryKey:["conceptos_ingreso",e,o],queryFn:()=>E(e,o),enabled:!!e&&!!o})}function F(){const{entePublico:t,ejercicioFiscal:r}=p(),e=t?.id,o=r?.id;return f({queryKey:["resumen_ingresos",e,o],queryFn:()=>I(e,o),enabled:!!e&&!!o})}export{F as a,q as b,j as c,w as u};
