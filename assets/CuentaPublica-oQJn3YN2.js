import{u as S,j as e}from"./index-DlnbnB4f.js";import"./vendor-DEA9Ikep.js";import{u as R,B as C}from"./Button-DZlEhO8L.js";import{u as D}from"./useReportes-QlzDAk12.js";import{u as F,a as B}from"./usePresupuesto-_J6FHeZT.js";import{a as G}from"./usePatrimonio-CkP5-Ubc.js";import{u as V}from"./useDeuda-Cd1HjJXE.js";import{e as l}from"./exportHelpers-CvXmrB4L.js";import"./export-t5FFX7R_.js";import"./supabase-DANKYb0E.js";import"./presupuestoService-DQW52iiF.js";const H=o=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(o||0);function n({title:o,rows:t,onExport:r}){return e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base font-semibold text-text-primary",children:o}),e.jsx(C,{variant:"ghost",size:"sm",onClick:r,children:"Exportar"})]}),e.jsx("div",{className:"space-y-3",children:t.map(a=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-text-muted",children:a.label}),e.jsx("span",{className:"font-semibold font-mono",children:H(a.value)})]},a.label))})]})}function Y(){const{ejercicioFiscal:o}=S(),{data:t=[]}=R("periodo_contable",{filter:{ejercicio_id:o?.id},order:{column:"numero",ascending:!0}}),r=t.length?t[t.length-1].id:null,{data:a}=D(r),{data:c}=F(),{data:d}=B(),{data:i}=G(),{data:u}=V(),k=a?.activo?.total||0,T=a?.pasivo?.total||0,I=a?.hacienda?.total||0,m=c?.aprobado||0,p=c?.ejercido||0,b=c?.pagado||0,x=d?.estimado||0,g=d?.recaudado||0,j=(i?.muebles||0)+(i?.inmuebles||0)+(i?.intangibles||0),v=i?.valor_neto||0,h=u?.saldo_total||0,f=u?.total_instrumentos||0,y=()=>{const A=[...(a?.activo?.cuentas||[]).map(s=>({seccion:"ACTIVO",...s})),...(a?.pasivo?.cuentas||[]).map(s=>({seccion:"PASIVO",...s})),...(a?.hacienda?.cuentas||[]).map(s=>({seccion:"HACIENDA",...s}))];l(A,[{key:"seccion",label:"Seccion"},{key:"codigo",label:"Codigo"},{key:"nombre",label:"Nombre"},{key:"saldo_final",label:"Saldo Final"}],"cuenta_publica_financiera")},N=()=>{l([{aprobado:m,ejercido:p,pagado:b}],[{key:"aprobado",label:"Aprobado"},{key:"ejercido",label:"Ejercido"},{key:"pagado",label:"Pagado"}],"cuenta_publica_egresos")},_=()=>{l([{estimado:x,recaudado:g}],[{key:"estimado",label:"Estimado"},{key:"recaudado",label:"Recaudado"}],"cuenta_publica_ingresos")},E=()=>{l([{total_bienes:j,valor_neto:v}],[{key:"total_bienes",label:"Total Bienes"},{key:"valor_neto",label:"Valor Neto Total"}],"cuenta_publica_patrimonio")},P=()=>{l([{saldo_total:h,total_instrumentos:f}],[{key:"saldo_total",label:"Saldo Total"},{key:"total_instrumentos",label:"Total Instrumentos"}],"cuenta_publica_deuda")},w=()=>{y(),N(),_(),E(),P()};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-xl font-bold text-text-primary",children:"Cuenta Publica"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"Compilacion anual de informacion financiera y presupuestal conforme a la LGCG"})]}),e.jsx("div",{className:"bg-guinda/5 border border-guinda/20 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-guinda",children:["La Cuenta Publica integra la informacion contable, presupuestaria y programatica del ejercicio fiscal ",o?.anio,"."]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[e.jsx(n,{title:"Informacion Financiera",onExport:y,rows:[{label:"Total Activos",value:k},{label:"Total Pasivos",value:T},{label:"Total Hacienda",value:I}]}),e.jsx(n,{title:"Presupuesto de Egresos",onExport:N,rows:[{label:"Aprobado",value:m},{label:"Ejercido",value:p},{label:"Pagado",value:b}]}),e.jsx(n,{title:"Presupuesto de Ingresos",onExport:_,rows:[{label:"Estimado",value:x},{label:"Recaudado",value:g}]}),e.jsx(n,{title:"Patrimonio",onExport:E,rows:[{label:"Total Bienes",value:j},{label:"Valor Neto Total",value:v}]}),e.jsx(n,{title:"Deuda Publica",onExport:P,rows:[{label:"Saldo Total",value:h},{label:"Total Instrumentos",value:f}]})]}),e.jsx("div",{className:"bg-white rounded-lg card-shadow p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-text-primary",children:"Paquete Completo"}),e.jsx("p",{className:"text-xs text-text-muted mt-0.5",children:"Genera todas las secciones de la Cuenta Publica en archivos Excel individuales"})]}),e.jsx(C,{onClick:w,children:"Generar Cuenta Publica Completa"})]})})]})}export{Y as default};
