import{s as a,u as c,o as d}from"./index-BVSG4AJE.js";async function s(r,n){const{data:o,error:e}=await a.from("fondo_federal").select("*, clasificador:clasificador_presupuestal!clasificador_id(codigo, nombre)").eq("ente_id",r).eq("ejercicio_id",n).order("clave");if(e)throw e;return o.map(t=>({...t,pct_ejercido:Number(t.monto_asignado)>0?Number(t.monto_ejercido)/Number(t.monto_asignado)*100:0}))}async function u(r,n){const{data:o,error:e}=await a.from("fondo_federal").select("monto_asignado, monto_recibido, monto_ejercido, monto_reintegrado").eq("ente_id",r).eq("ejercicio_id",n);if(e)throw e;return m(o)}function m(r){let n=0,o=0,e=0,t=0;for(const i of r)n+=Number(i.monto_asignado)||0,o+=Number(i.monto_recibido)||0,e+=Number(i.monto_ejercido)||0,t+=Number(i.monto_reintegrado)||0;return{total_asignado:n,total_recibido:o,total_ejercido:e,total_reintegrado:t,pct_avance:n>0?e/n*100:0}}function _(){const{entePublico:r,ejercicioFiscal:n}=c(),o=r?.id,e=n?.id;return d({queryKey:["fondos_federales",o,e],queryFn:()=>s(o,e),enabled:!!o&&!!e})}function f(){const{entePublico:r,ejercicioFiscal:n}=c(),o=r?.id,e=n?.id;return d({queryKey:["resumen_fondos",o,e],queryFn:()=>u(o,e),enabled:!!o&&!!e})}export{_ as a,f as u};
