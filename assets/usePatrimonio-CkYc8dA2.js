import{s as t,u as c,o as a}from"./index-xuYioy8Y.js";function r(){return{total_muebles:0,total_inmuebles:0,total_intangibles:0,valor_total:0,depreciacion_total:0,valor_neto_total:0}}async function s(n,o){const{data:i,error:e}=await t.from("bien_patrimonial").select("*, cuenta:plan_de_cuentas!cuenta_contable_id(codigo, nombre)").eq("ente_id",n).eq("ejercicio_id",o).order("clave");if(e)throw e;return i}async function u(n,o){const{data:i,error:e}=await t.from("bien_patrimonial").select("tipo, valor_adquisicion, depreciacion_acumulada").eq("ente_id",n).eq("ejercicio_id",o);if(e)throw e;return l(i)}function l(n){const o=r();for(const i of n){const e=i.tipo;e==="mueble"?o.total_muebles++:e==="inmueble"?o.total_inmuebles++:e==="intangible"&&o.total_intangibles++,o.valor_total+=Number(i.valor_adquisicion)||0,o.depreciacion_total+=Number(i.depreciacion_acumulada)||0}return o.valor_neto_total=o.valor_total-o.depreciacion_total,o}async function d(n,o){const{data:i,error:e}=await t.from("inventario_conteo").select("*").eq("ente_id",n).eq("ejercicio_id",o).order("fecha_conteo",{ascending:!1});if(e)throw e;return i}async function _(n,o){const{data:i,error:e}=await t.from("fideicomiso").select("*, cuenta:plan_de_cuentas!cuenta_contable_id(codigo, nombre)").eq("ente_id",n).eq("ejercicio_id",o).order("clave");if(e)throw e;return i}function f(){const{entePublico:n,ejercicioFiscal:o}=c(),i=n?.id,e=o?.id;return a({queryKey:["bienes",i,e],queryFn:()=>s(i,e),enabled:!!i&&!!e})}function b(){const{entePublico:n,ejercicioFiscal:o}=c(),i=n?.id,e=o?.id;return a({queryKey:["resumen_patrimonio",i,e],queryFn:()=>u(i,e),enabled:!!i&&!!e})}function p(){const{entePublico:n,ejercicioFiscal:o}=c(),i=n?.id,e=o?.id;return a({queryKey:["inventarios",i,e],queryFn:()=>d(i,e),enabled:!!i&&!!e})}function q(){const{entePublico:n,ejercicioFiscal:o}=c(),i=n?.id,e=o?.id;return a({queryKey:["fideicomisos",i,e],queryFn:()=>_(i,e),enabled:!!i&&!!e})}export{b as a,p as b,q as c,f as u};
