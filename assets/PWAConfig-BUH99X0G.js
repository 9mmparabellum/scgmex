import{s as T,j as e}from"./index-FiQ-o0as.js";import{b as n}from"./vendor-DEA9Ikep.js";import{_ as je}from"./export-t5FFX7R_.js";import"./supabase-DANKYb0E.js";function be(a={}){const{immediate:o=!1,onNeedRefresh:r,onOfflineReady:s,onRegistered:i,onRegisteredSW:l,onRegisterError:x}=a;let m,p;const N=async(d=!0)=>{await p};async function b(){if("serviceWorker"in navigator){if(m=await je(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/scgmex/sw.js",{scope:"/scgmex/",type:"classic"})).catch(d=>{x?.(d)}),!m)return;m.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),m.addEventListener("installed",d=>{d.isUpdate||s?.()}),m.register({immediate:o}).then(d=>{l?l("/scgmex/sw.js",d):i?.(d)}).catch(d=>{x?.(d)})}}return p=b(),N}function ye(a={}){const{immediate:o=!0,onNeedRefresh:r,onOfflineReady:s,onRegistered:i,onRegisteredSW:l,onRegisterError:x}=a,[m,p]=n.useState(!1),[N,b]=n.useState(!1),[d]=n.useState(()=>be({immediate:o,onOfflineReady(){b(!0),s?.()},onNeedRefresh(){p(!0),r?.()},onRegistered:i,onRegisteredSW:l,onRegisterError:x}));return{needRefresh:[m,p],offlineReady:[N,b],updateServiceWorker:d}}const we="scgmex_offline",ve=1,f="sync_queue";function q(){return new Promise((a,o)=>{const r=indexedDB.open(we,ve);r.onerror=()=>o(r.error),r.onsuccess=()=>a(r.result),r.onupgradeneeded=s=>{const i=s.target.result;if(!i.objectStoreNames.contains(f)){const l=i.createObjectStore(f,{keyPath:"id",autoIncrement:!0});l.createIndex("status","status",{unique:!1}),l.createIndex("timestamp","timestamp",{unique:!1}),l.createIndex("table","table",{unique:!1})}}})}async function Q(){const r=(await q()).transaction(f,"readonly").objectStore(f);return new Promise((s,i)=>{const l=r.getAll();l.onsuccess=()=>s(l.result),l.onerror=()=>i(l.error)})}async function Ne(){return(await Q()).filter(o=>o.status==="pending").length}async function D(a,o){const s=(await q()).transaction(f,"readwrite"),i=s.objectStore(f),l=await new Promise(x=>{const m=i.get(a);m.onsuccess=()=>x(m.result)});return l&&(Object.assign(l,o),i.put(l)),new Promise(x=>{s.oncomplete=()=>x()})}async function ie(a){const r=(await q()).transaction(f,"readwrite");return r.objectStore(f).delete(a),new Promise(s=>{r.oncomplete=()=>s()})}async function ke(){const o=(await q()).transaction(f,"readwrite");return o.objectStore(f).clear(),new Promise(r=>{o.oncomplete=()=>r()})}async function P(){const o=(await Q()).filter(s=>s.status==="pending"),r={synced:0,failed:0,errors:[]};for(const s of o)try{switch(await D(s.id,{status:"syncing"}),s.type){case"create":{const{error:i}=await T.from(s.table).insert(s.data);if(i)throw i;break}case"update":{const{id:i,...l}=s.data,{error:x}=await T.from(s.table).update(l).eq("id",i);if(x)throw x;break}case"delete":{const{error:i}=await T.from(s.table).delete().eq("id",s.data.id);if(i)throw i;break}default:throw new Error(`Unknown operation type: ${s.type}`)}await ie(s.id),r.synced++}catch(i){const l=(s.retries||0)+1;l>=s.maxRetries?await D(s.id,{status:"failed",error:i.message,retries:l}):await D(s.id,{status:"pending",retries:l}),r.failed++,r.errors.push({id:s.id,error:i.message})}return r}let C=null,L=null;function Se(a=3e4){C||(L=()=>{P()},window.addEventListener("online",L),C=setInterval(async()=>{navigator.onLine&&await Ne()>0&&await P()},a))}function Ce(){C&&(clearInterval(C),C=null),L&&(window.removeEventListener("online",L),L=null)}const u={primary:"bg-guinda/10 text-guinda",success:"bg-emerald-50 text-emerald-600",warning:"bg-amber-50 text-amber-600",danger:"bg-red-50 text-red-600",info:"bg-sky-50 text-sky-600",default:"bg-gray-100 text-gray-600"},M={success:"bg-emerald-500",danger:"bg-red-500",warning:"bg-amber-500",info:"bg-sky-500"};function U(a){return a?new Date(a).toLocaleString("es-MX",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--"}function B(a){if(!a||a===0)return"0 B";const o=1024,r=["B","KB","MB","GB"],s=Math.floor(Math.log(a)/Math.log(o));return parseFloat((a/Math.pow(o,s)).toFixed(1))+" "+r[s]}const Le=e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M5 12.55a11 11 0 0 1 14.08 0"}),e.jsx("path",{d:"M1.42 9a16 16 0 0 1 21.16 0"}),e.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),e.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]}),Ee=e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),e.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),e.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),e.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.56 9"}),e.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),e.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),e.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]}),Ie=e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"23 4 23 10 17 10"}),e.jsx("polyline",{points:"1 20 1 14 7 14"}),e.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),Re=e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),O=e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),ae=e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),e.jsx("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),e.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"})]}),Ae=e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),e.jsx("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"})]}),We=e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"22",y1:"12",x2:"2",y2:"12"}),e.jsx("path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"}),e.jsx("line",{x1:"6",y1:"16",x2:"6.01",y2:"16"}),e.jsx("line",{x1:"10",y1:"16",x2:"10.01",y2:"16"})]}),Me=e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),V=e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),S=e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"23 4 23 10 17 10"}),e.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),re=e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),Be=e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),Oe=e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]});function De(a){return a?a.installing?{label:"Instalando",variant:"warning"}:a.waiting?{label:"Actualizacion lista",variant:"info"}:a.active?{label:"Activo",variant:"success"}:{label:"Desconocido",variant:"default"}:{label:"No registrado",variant:"default"}}function ze(){const{needRefresh:[a,o],offlineReady:[r,s],updateServiceWorker:i}=ye({onRegisteredSW(t,c){l.current=c,m(j=>({...j,url:t,registration:c,lastCheck:new Date().toISOString()}))},onRegisterError(t){m(c=>({...c,error:t?.message||"Error de registro"}))}}),l=n.useRef(null),[x,m]=n.useState({url:null,registration:null,lastCheck:null,error:null}),[p,N]=n.useState(()=>navigator.onLine);n.useEffect(()=>{const t=()=>N(!0),c=()=>N(!1);return window.addEventListener("online",t),window.addEventListener("offline",c),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",c)}},[]);const[b,d]=n.useState(!1);n.useEffect(()=>(Se(3e4),d(!0),()=>{Ce(),d(!1)}),[]);const[E,G]=n.useState(!1),[_,H]=n.useState(null),[le,oe]=n.useState(()=>localStorage.getItem("pwa_last_sync")||null),ce=n.useCallback(async()=>{G(!0);try{const t=await P(),c=new Date().toISOString();localStorage.setItem("pwa_last_sync",c),oe(c),H(t),h()}catch{H({synced:0,failed:0,errors:[{error:"Sync failed"}]})}finally{G(!1)}},[]),[de,I]=n.useState(!1),[y,X]=n.useState(null);n.useEffect(()=>{try{const t=window.matchMedia("(display-mode: standalone)");I(t.matches);const c=j=>I(j.matches);return t.addEventListener("change",c),()=>t.removeEventListener("change",c)}catch{I(!1)}},[]),n.useEffect(()=>{const t=c=>{c.preventDefault(),X(c)};return window.addEventListener("beforeinstallprompt",t),()=>window.removeEventListener("beforeinstallprompt",t)},[]);const xe=n.useCallback(async()=>{if(y)try{y.prompt(),(await y.userChoice).outcome==="accepted"&&I(!0),X(null)}catch{}},[y]),[g,F]=n.useState({usage:0,quota:0,supported:!1}),w=n.useCallback(async()=>{try{if(navigator.storage&&navigator.storage.estimate){const t=await navigator.storage.estimate();F({usage:t.usage||0,quota:t.quota||0,supported:!0})}}catch{F({usage:0,quota:0,supported:!1})}},[]);n.useEffect(()=>{w()},[w]);const R=g.quota>0?Math.min(g.usage/g.quota*100,100):0,[A,ue]=n.useState([]),[K,J]=n.useState(!1),v=n.useCallback(async()=>{J(!0);try{if("caches"in window){const t=await caches.keys(),c=[];for(const j of t){const ge=await(await caches.open(j)).keys();c.push({name:j,count:ge.length})}ue(c)}}catch{}J(!1)},[]);n.useEffect(()=>{v()},[v]);const me=n.useCallback(async t=>{try{await caches.delete(t),await v(),await w()}catch{}},[v,w]),Y=n.useCallback(async()=>{try{if("caches"in window){const t=await caches.keys();await Promise.all(t.map(c=>caches.delete(c))),await v(),await w()}}catch{}},[v,w]),[k,Z]=n.useState([]),[ee,te]=n.useState(!1),h=n.useCallback(async()=>{te(!0);try{const t=await Q();Z(t)}catch{Z([])}te(!1)},[]);n.useEffect(()=>{h()},[h]),n.useEffect(()=>{const t=setInterval(h,1e4);return()=>clearInterval(t)},[h]);const he=n.useCallback(async t=>{await D(t,{status:"pending",retries:0}),h(),navigator.onLine&&(await P(),h())},[h]),pe=n.useCallback(async t=>{await ie(t),h()},[h]),fe=n.useCallback(async()=>{await ke(),h()},[h]),$=x.registration,z=De($),W=k.filter(t=>t.status==="pending").length,se=k.filter(t=>t.status==="failed").length;return e.jsxs("div",{className:"space-y-6",children:[a&&e.jsxs("div",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sky-600",children:Oe}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-sky-800",children:"Nueva version disponible"}),e.jsx("p",{className:"text-xs text-sky-600 mt-0.5",children:"Hay una actualizacion lista. Recarga para obtener la ultima version de SCGMEX."})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center gap-1.5 h-[38px] px-4 rounded-md text-sm font-medium bg-sky-600 text-white hover:bg-sky-700 transition-colors",children:[S,"Actualizar"]}),e.jsx("button",{onClick:()=>o(!1),className:"inline-flex items-center gap-1.5 h-[38px] px-3 rounded-md text-sm font-medium text-sky-600 bg-sky-100 hover:bg-sky-200 transition-colors",children:"Despues"})]})]}),r&&e.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-emerald-600",children:V}),e.jsx("p",{className:"text-sm font-medium text-emerald-700",children:"SCGMEX esta listo para funcionar sin conexion."})]}),e.jsx("button",{onClick:()=>s(!1),className:"text-emerald-400 hover:text-emerald-600 transition-colors",children:re})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-text-primary",children:"PWA / Modo Offline"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"Estado real del Service Worker, cache del navegador y cola de sincronizacion offline"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-guinda/10 flex items-center justify-center text-guinda",children:Be}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-[15px] font-semibold text-text-heading",children:"Service Worker"}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 text-xs font-medium px-2.5 py-0.5 rounded-full ${u[z.variant]}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${M[z.variant]||M.info}`}),z.label]})]})]}),e.jsxs("div",{className:"space-y-2.5 text-[13px]",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Estado de registro"}),e.jsx("span",{className:"text-text-heading font-medium",children:x.error?"Error":$?"Registrado":"Sin registrar"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Tipo de registro"}),e.jsx("span",{className:"text-text-heading font-medium",children:"autoUpdate"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Ultima verificacion"}),e.jsx("span",{className:"text-text-heading font-medium",children:U(x.lastCheck)})]}),x.error&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Error"}),e.jsx("span",{className:"text-red-600 font-medium text-xs max-w-[200px] truncate",children:x.error})]})]}),$?.waiting&&e.jsxs("button",{onClick:()=>i(!0),className:"mt-4 w-full inline-flex items-center justify-center gap-2 h-[38px] px-4 rounded-md text-sm font-medium bg-sky-600 text-white hover:bg-sky-700 transition-colors",children:[S,"Aplicar Actualizacion"]})]}),e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${p?"bg-emerald-50 text-emerald-600":"bg-red-50 text-red-500"}`,children:p?Le:Ee}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-[15px] font-semibold text-text-heading",children:"Estado de Conexion"}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 text-xs font-medium px-2.5 py-0.5 rounded-full ${p?u.success:u.danger}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${p?M.success:M.danger}`}),p?"En Linea":"Sin Conexion"]})]})]}),e.jsxs("div",{className:"space-y-2.5 text-[13px]",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Auto-sync"}),e.jsx("span",{className:`font-medium ${b?"text-emerald-600":"text-gray-400"}`,children:b?"Activo (30s)":"Inactivo"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Ultima sincronizacion"}),e.jsx("span",{className:"text-text-heading font-medium",children:U(le)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Operaciones pendientes"}),e.jsx("span",{className:`font-medium ${W>0?"text-amber-600":"text-text-heading"}`,children:W})]}),_&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Ultimo resultado"}),e.jsxs("span",{className:"text-text-heading font-medium text-xs",children:[_.synced," ok, ",_.failed," error"]})]})]}),e.jsxs("button",{onClick:ce,disabled:E,className:`mt-4 w-full inline-flex items-center justify-center gap-2 h-[38px] px-4 rounded-md text-sm font-medium transition-colors ${E?"bg-amber-50 text-amber-600 cursor-not-allowed":"bg-guinda text-white hover:bg-guinda-dark"}`,children:[e.jsx("span",{className:E?"animate-spin":"",children:Ie}),E?"Sincronizando...":"Sincronizar Ahora"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg card-shadow",children:[e.jsx("div",{className:"px-5 py-4 border-b border-border",children:e.jsxs("h2",{className:"text-[15px] font-semibold text-text-heading flex items-center gap-2",children:[Ae,"Instalacion PWA"]})}),e.jsx("div",{className:"p-5",children:de?e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 rounded-lg",children:[e.jsx("span",{className:"text-emerald-600 flex-shrink-0",children:V}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-emerald-700",children:"Aplicacion instalada"}),e.jsx("p",{className:"text-xs text-emerald-600 mt-0.5",children:"SCGMEX esta instalada como aplicacion independiente en este dispositivo."})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[13px] text-text-muted leading-relaxed",children:"Instala SCGMEX como aplicacion en tu dispositivo para acceder rapidamente desde tu escritorio o pantalla de inicio, incluso cuando no tengas conexion a internet."}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:xe,disabled:!y,className:`inline-flex items-center gap-2 h-[38px] px-4 rounded-md text-sm font-medium transition-colors ${y?"bg-guinda text-white hover:bg-guinda-dark":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[Re,"Instalar Aplicacion"]}),!y&&e.jsx("p",{className:"text-xs text-text-muted self-center",children:"La instalacion no esta disponible en este navegador o ya fue instalada."})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg card-shadow",children:[e.jsx("div",{className:"px-5 py-4 border-b border-border",children:e.jsxs("h2",{className:"text-[15px] font-semibold text-text-heading flex items-center gap-2",children:[We,"Almacenamiento del Navegador"]})}),e.jsx("div",{className:"p-5",children:g.supported?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[13px] text-text-primary",children:"Espacio utilizado"}),e.jsxs("span",{className:"text-[13px] font-semibold text-text-heading",children:[B(g.usage)," / ",B(g.quota)]})]}),e.jsx("div",{className:"w-full bg-bg-main rounded-full h-[8px]",children:e.jsx("div",{className:`h-[8px] rounded-full transition-all duration-500 ${R>80?"bg-red-500":R>50?"bg-amber-500":"bg-guinda"}`,style:{width:`${R}%`}})}),e.jsxs("p",{className:"text-xs text-text-muted mt-1.5",children:[R.toFixed(2),"% del almacenamiento disponible utilizado"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-bg-main rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-text-heading",children:B(g.usage)}),e.jsx("p",{className:"text-xs text-text-muted",children:"Usado"})]}),e.jsxs("div",{className:"bg-bg-main rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-text-heading",children:B(g.quota-g.usage)}),e.jsx("p",{className:"text-xs text-text-muted",children:"Disponible"})]})]}),e.jsxs("button",{onClick:async()=>{await Y(),await w()},className:"inline-flex items-center gap-2 h-[38px] px-4 rounded-md text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 transition-colors",children:[O,"Liberar Espacio"]})]}):e.jsx("div",{className:"text-center py-6",children:e.jsx("p",{className:"text-sm text-text-muted",children:"La API de Storage Estimation no esta disponible en este navegador."})})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg card-shadow",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-border flex items-center justify-between",children:[e.jsxs("h2",{className:"text-[15px] font-semibold text-text-heading flex items-center gap-2",children:[ae,"Cache del Service Worker"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:v,disabled:K,className:"inline-flex items-center gap-1.5 h-[34px] px-3 rounded-md text-xs font-medium text-text-muted bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:K?"animate-spin":"",children:S}),"Recargar"]}),e.jsxs("button",{onClick:Y,disabled:A.length===0,className:`inline-flex items-center gap-1.5 h-[34px] px-3 rounded-md text-xs font-medium transition-colors ${A.length>0?"text-red-600 bg-red-50 hover:bg-red-100":"text-gray-300 bg-gray-50 cursor-not-allowed"}`,children:[O,"Limpiar Todo"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:A.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-3 text-gray-400",children:ae}),e.jsx("p",{className:"text-sm font-medium text-text-heading",children:"Sin caches activos"}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"El Service Worker creara caches automaticamente al navegar."})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#f9fafb]",children:[e.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Nombre del Cache"}),e.jsx("th",{className:"px-5 py-3 text-center text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Entradas"}),e.jsx("th",{className:"px-5 py-3 text-center text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{children:A.map(t=>e.jsxs("tr",{className:"border-b border-border/50 last:border-0 hover:bg-bg-hover transition-colors",children:[e.jsx("td",{className:"px-5 py-3.5",children:e.jsx("p",{className:"text-[14px] font-medium text-text-heading truncate max-w-xs",children:t.name})}),e.jsx("td",{className:"px-5 py-3.5 text-center",children:e.jsxs("span",{className:`inline-block text-xs font-medium px-2.5 py-1 rounded-full ${t.count>0?u.success:u.default}`,children:[t.count," ",t.count===1?"recurso":"recursos"]})}),e.jsx("td",{className:"px-5 py-3.5 text-center",children:e.jsxs("button",{onClick:()=>me(t.name),className:"inline-flex items-center gap-1 text-xs font-medium px-2.5 py-1.5 rounded-md text-red-600 bg-red-50 hover:bg-red-100 transition-colors",children:[O,"Eliminar"]})})]},t.name))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg card-shadow",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-border flex items-center justify-between",children:[e.jsxs("h2",{className:"text-[15px] font-semibold text-text-heading flex items-center gap-2",children:[Me,"Cola de Operaciones Offline",W>0&&e.jsxs("span",{className:`inline-block text-xs font-medium px-2 py-0.5 rounded-full ${u.warning}`,children:[W," pendientes"]}),se>0&&e.jsxs("span",{className:`inline-block text-xs font-medium px-2 py-0.5 rounded-full ${u.danger}`,children:[se," fallidas"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:h,disabled:ee,className:"inline-flex items-center gap-1.5 h-[34px] px-3 rounded-md text-xs font-medium text-text-muted bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:ee?"animate-spin":"",children:S}),"Recargar"]}),k.length>0&&e.jsxs("button",{onClick:fe,className:"inline-flex items-center gap-1.5 h-[34px] px-3 rounded-md text-xs font-medium text-red-600 bg-red-50 hover:bg-red-100 transition-colors",children:[O,"Descartar Todo"]})]})]}),e.jsx("div",{className:"p-5",children:k.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-emerald-50 flex items-center justify-center mb-3",children:e.jsx("span",{className:"text-emerald-600",children:V})}),e.jsx("p",{className:"text-sm font-medium text-text-heading",children:"No hay operaciones pendientes"}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Todas las operaciones se han sincronizado correctamente con el servidor."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#f9fafb]",children:[e.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Tabla"}),e.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-4 py-2.5 text-center text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-2.5 text-center text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Reintentos"}),e.jsx("th",{className:"px-4 py-2.5 text-center text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{children:k.map(t=>{const c=t.status==="pending"?u.warning:t.status==="syncing"?u.info:t.status==="failed"?u.danger:u.default,j=t.status==="pending"?"Pendiente":t.status==="syncing"?"Sincronizando":t.status==="failed"?"Fallido":t.status,ne=t.type==="create"?"Crear":t.type==="update"?"Actualizar":t.type==="delete"?"Eliminar":t.type;return e.jsxs("tr",{className:"border-b border-border/50 last:border-0 hover:bg-bg-hover transition-colors",children:[e.jsxs("td",{className:"px-4 py-3 text-[13px] font-mono text-text-muted",children:["#",t.id]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-block text-xs font-medium px-2 py-0.5 rounded-full ${t.type==="create"?u.success:t.type==="update"?u.info:t.type==="delete"?u.danger:u.default}`,children:ne})}),e.jsx("td",{className:"px-4 py-3 text-[13px] font-medium text-text-heading",children:t.table||"--"}),e.jsx("td",{className:"px-4 py-3 text-[13px] text-text-muted font-mono",children:U(t.timestamp)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-block text-xs font-medium px-2.5 py-1 rounded-full ${c}`,children:j})}),e.jsxs("td",{className:"px-4 py-3 text-center text-[13px] text-text-muted",children:[t.retries||0," / ",t.maxRetries||3]}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>he(t.id),disabled:t.status==="syncing",className:`inline-flex items-center gap-1 text-xs font-medium px-2.5 py-1.5 rounded-md transition-colors ${t.status==="syncing"?"text-gray-300 bg-gray-50 cursor-not-allowed":"text-guinda bg-guinda/10 hover:bg-guinda/20"}`,children:[S,"Reintentar"]}),e.jsxs("button",{onClick:()=>pe(t.id),disabled:t.status==="syncing",className:`inline-flex items-center gap-1 text-xs font-medium px-2.5 py-1.5 rounded-md transition-colors ${t.status==="syncing"?"text-gray-300 bg-gray-50 cursor-not-allowed":"text-red-600 bg-red-50 hover:bg-red-100"}`,children:[re,"Descartar"]})]}),t.error&&e.jsx("p",{className:"text-[11px] text-red-500 mt-1 max-w-[200px] truncate mx-auto",children:t.error})]})]},t.id)})})]})})})]})]})}export{ze as default};
