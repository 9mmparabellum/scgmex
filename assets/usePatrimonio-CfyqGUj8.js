import{s as t,u as c,n as a}from"./index-BS2M8vvb.js";function r(){return{total_muebles:0,total_inmuebles:0,total_intangibles:0,valor_total:0,depreciacion_total:0,valor_neto_total:0}}async function s(o,n){const{data:i,error:e}=await t.from("bien_patrimonial").select("*, cuenta:plan_de_cuentas!cuenta_contable_id(codigo, nombre)").eq("ente_id",o).eq("ejercicio_id",n).order("clave");if(e)throw e;return i}async function u(o,n){const{data:i,error:e}=await t.from("bien_patrimonial").select("tipo, valor_adquisicion, depreciacion_acumulada").eq("ente_id",o).eq("ejercicio_id",n);if(e)throw e;return l(i)}function l(o){const n=r();for(const i of o){const e=i.tipo;e==="mueble"?n.total_muebles++:e==="inmueble"?n.total_inmuebles++:e==="intangible"&&n.total_intangibles++,n.valor_total+=Number(i.valor_adquisicion)||0,n.depreciacion_total+=Number(i.depreciacion_acumulada)||0}return n.valor_neto_total=n.valor_total-n.depreciacion_total,n}async function d(o,n){const{data:i,error:e}=await t.from("inventario_conteo").select("*").eq("ente_id",o).eq("ejercicio_id",n).order("fecha_conteo",{ascending:!1});if(e)throw e;return i}async function _(o,n){const{data:i,error:e}=await t.from("fideicomiso").select("*, cuenta:plan_de_cuentas!cuenta_contable_id(codigo, nombre)").eq("ente_id",o).eq("ejercicio_id",n).order("clave");if(e)throw e;return i}function f(){const{entePublico:o,ejercicioFiscal:n}=c(),i=o?.id,e=n?.id;return a({queryKey:["bienes",i,e],queryFn:()=>s(i,e),enabled:!!i&&!!e})}function b(){const{entePublico:o,ejercicioFiscal:n}=c(),i=o?.id,e=n?.id;return a({queryKey:["resumen_patrimonio",i,e],queryFn:()=>u(i,e),enabled:!!i&&!!e})}function p(){const{entePublico:o,ejercicioFiscal:n}=c(),i=o?.id,e=n?.id;return a({queryKey:["inventarios",i,e],queryFn:()=>d(i,e),enabled:!!i&&!!e})}function q(){const{entePublico:o,ejercicioFiscal:n}=c(),i=o?.id,e=n?.id;return a({queryKey:["fideicomisos",i,e],queryFn:()=>_(i,e),enabled:!!i&&!!e})}export{b as a,p as b,q as c,f as u};
