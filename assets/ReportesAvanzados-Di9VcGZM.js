import{s as A,u as P,o as O,r as te,A as se,j as e}from"./index-CPaKNtDw.js";import{b as m}from"./vendor-DEA9Ikep.js";import{useCreate as re,useUpdate as ae,useRemove as ie}from"./useCrud-BktvsPeN.js";import{e as ne}from"./exportHelpers-CvXmrB4L.js";import{D as de}from"./DataTable-HS7RLNYY.js";import{B as u}from"./Button-BnoK6vsi.js";import{B as T}from"./Badge-CGz_j3CN.js";import{M as le}from"./Modal-BiK_8Ur7.js";import{I as B}from"./Input-DL7Lvbg0.js";import{S}from"./Select-C_7OhVDc.js";import{C as ce}from"./ConfirmDialog-DLbWcXIK.js";import"./supabase-DANKYb0E.js";import"./export-t5FFX7R_.js";async function pe(s,r){const{data:a,error:t}=await A.from("reporte_personalizado").select("*").eq("ente_id",s).eq("ejercicio_id",r).order("updated_at",{ascending:!1});if(t)throw t;return a}async function me(s,r){const{data:a}=await A.from("reporte_personalizado").select("id, tipo, estado").eq("ente_id",s).eq("ejercicio_id",r),t=a||[];return{total:t.length,generados:t.filter(d=>d.estado==="generado").length,aprobados:t.filter(d=>d.estado==="aprobado").length,exportados:t.filter(d=>d.estado==="exportado").length}}function ue(){const{entePublico:s,ejercicioFiscal:r}=P(),a=s?.id,t=r?.id;return O({queryKey:["reporte_personalizado",a,t],queryFn:()=>pe(a,t),enabled:!!a&&!!t})}function xe(){const{entePublico:s,ejercicioFiscal:r}=P(),a=s?.id,t=r?.id;return O({queryKey:["resumen_reportes",a,t],queryFn:()=>me(a,t),enabled:!!a&&!!t})}const z={financiero:"Financiero",presupuestal:"Presupuestal",patrimonial:"Patrimonial",fiscal:"Fiscal",personalizado:"Personalizado"},V={borrador:{label:"Borrador",variant:"default"},generado:{label:"Generado",variant:"info"},aprobado:{label:"Aprobado",variant:"success"},exportado:{label:"Exportado",variant:"primary"}},he=[{value:"PDF",label:"PDF"},{value:"Excel",label:"Excel"},{value:"CSV",label:"CSV"}],ge=Object.entries(z).map(([s,r])=>({value:s,label:r})),fe=Object.entries(V).map(([s,{label:r}])=>({value:s,label:r})),_={nombre:"",tipo:"",descripcion:"",formato:"",parametros:"",fecha_generacion:"",estado:"borrador",notas:""},be=[{id:"esf",titulo:"Estado de Situacion Financiera",descripcion:"Muestra la posicion financiera del ente publico a una fecha determinada: activos, pasivos y hacienda publica.",tipo:"financiero",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 7h6m-6 4h6m-6 4h4M5 3h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2z"})})},{id:"ea",titulo:"Estado de Actividades",descripcion:"Presenta los ingresos y gastos del periodo, asi como el resultado del ejercicio (ahorro/desahorro).",tipo:"financiero",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M16 8v8m-4-5v5m-4-2v2m-2 4h16a2 2 0 002-2V6a2 2 0 00-2-2H4a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{id:"evhp",titulo:"Estado de Variacion en Hacienda Publica",descripcion:"Refleja las variaciones de la hacienda publica contribuida y generada durante el periodo.",tipo:"patrimonial",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})},{id:"eaa",titulo:"Estado Analitico del Activo",descripcion:"Detalla los movimientos de las cuentas de activo: saldo inicial, cargos, abonos y saldo final.",tipo:"financiero",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{id:"efe",titulo:"Estado de Flujos de Efectivo",descripcion:"Muestra las entradas y salidas de efectivo clasificadas en actividades de operacion, inversion y financiamiento.",tipo:"financiero",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"cipc",titulo:"Conciliacion entre Ingresos Presupuestarios y Contables",descripcion:"Concilia las diferencias entre los ingresos registrados en el presupuesto y los registrados contablemente.",tipo:"presupuestal",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})},{id:"cepc",titulo:"Conciliacion entre Egresos Presupuestarios y Contables",descripcion:"Concilia las diferencias entre los egresos registrados en el presupuesto y los registrados contablemente.",tipo:"presupuestal",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})},{id:"eai",titulo:"Estado Analitico de Ingresos",descripcion:"Presenta el detalle de los ingresos presupuestarios: estimado, recaudado y diferencia por rubro.",tipo:"presupuestal",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})},{id:"eaepe",titulo:"Estado Analitico del Ejercicio del Presupuesto de Egresos",descripcion:"Muestra el ejercicio del gasto por partida: aprobado, modificado, comprometido, devengado, ejercido y pagado.",tipo:"presupuestal",icon:e.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),e.jsx("path",{d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})]})}];function k({label:s,value:r,icon:a,color:t}){return e.jsx("div",{className:"bg-white rounded-lg card-shadow p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-muted mb-1",children:s}),e.jsx("h3",{className:"text-2xl font-bold text-text-heading",children:r})]}),e.jsx("div",{className:`w-11 h-11 rounded-lg flex items-center justify-center ${t}`,children:a})]})})}function Pe(){const{entePublico:s,ejercicioFiscal:r,user:a,rol:t}=P(),d=te(o=>o.addToast),p=se(t,"reportes"),{data:N=[],isLoading:F}=ue(),{data:x}=xe(),h=re("reporte_personalizado"),g=ae("reporte_personalizado"),R=ie("reporte_personalizado"),[f,y]=m.useState("mis_reportes"),[D,w]=m.useState(!1),[b,C]=m.useState(null),[n,j]=m.useState(_),[W,M]=m.useState(!1),[E,L]=m.useState(null),c=(o,i)=>j(l=>({...l,[o]:i})),H=x?.total??0,I=x?.generados??0,G=x?.aprobados??0,q=x?.exportados??0,$=()=>{C(null),j(_),w(!0)},K=o=>{C(o),j({nombre:o.nombre||"",tipo:o.tipo||"",descripcion:o.descripcion||"",formato:o.formato||"",parametros:o.parametros||"",fecha_generacion:o.fecha_generacion||"",estado:o.estado||"borrador",notas:o.notas||""}),w(!0)},v=()=>{w(!1),C(null),j(_)},X=()=>{if(!n.nombre.trim()||!n.tipo){d({type:"warning",title:"Campos requeridos",message:"Nombre y tipo son obligatorios"});return}const o={...n,ente_id:s?.id,ejercicio_id:r?.id,creado_por:a?.id};b?g.mutate({id:b.id,...o},{onSuccess:v}):h.mutate(o,{onSuccess:v})},J=o=>{L(o),M(!0)},Q=()=>{E&&R.mutate(E.id,{onSuccess:()=>{M(!1),L(null)}})},U=o=>{const i={nombre:o.titulo,tipo:o.tipo,descripcion:o.descripcion,formato:"PDF",parametros:"",fecha_generacion:new Date().toISOString().split("T")[0],estado:"generado",notas:"Generado desde plantilla predefinida",ente_id:s?.id,ejercicio_id:r?.id,creado_por:a?.id};h.mutate(i,{onSuccess:()=>{d({type:"success",title:"Reporte generado",message:`"${o.titulo}" generado exitosamente`}),y("mis_reportes")}})},Y=o=>{g.mutate({id:o.id,estado:"generado",fecha_generacion:new Date().toISOString().split("T")[0]})},Z=o=>{g.mutate({id:o.id,estado:"exportado"},{onSuccess:()=>{d({type:"success",title:"Reporte exportado",message:`"${o.nombre}" marcado como exportado`})}})},ee=()=>{ne(N,[{key:"nombre",label:"Nombre"},{key:"tipo",label:"Tipo"},{key:"descripcion",label:"Descripcion"},{key:"formato",label:"Formato"},{key:"fecha_generacion",label:"Fecha Generacion"},{key:"estado",label:"Estado"}],"reportes_personalizados")},oe=m.useMemo(()=>[{key:"nombre",label:"Nombre",width:"18%"},{key:"tipo",label:"Tipo",width:"12%",render:o=>z[o]||o||"—"},{key:"descripcion",label:"Descripcion",width:"20%",render:o=>o?o.length>60?o.slice(0,60)+"...":o:"—"},{key:"formato",label:"Formato",width:"8%"},{key:"fecha_generacion",label:"Fecha Generacion",width:"12%"},{key:"estado",label:"Estado",width:"10%",render:o=>{const i=V[o];return i?e.jsx(T,{variant:i.variant,children:i.label}):o||"—"}},{key:"acciones",label:"Acciones",sortable:!1,width:"20%",render:(o,i)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[i.estado==="borrador"&&p&&e.jsxs("button",{onClick:l=>{l.stopPropagation(),Y(i)},className:"inline-flex items-center h-[30px] px-2.5 rounded-md text-xs font-medium bg-sky-50 text-sky-600 hover:bg-sky-100 transition-colors cursor-pointer",title:"Generar",children:[e.jsxs("svg",{className:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Generar"]}),(i.estado==="generado"||i.estado==="aprobado")&&p&&e.jsxs("button",{onClick:l=>{l.stopPropagation(),Z(i)},className:"inline-flex items-center h-[30px] px-2.5 rounded-md text-xs font-medium bg-guinda/10 text-guinda hover:bg-guinda/20 transition-colors cursor-pointer",title:"Exportar",children:[e.jsx("svg",{className:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Exportar"]}),p&&e.jsx("button",{onClick:l=>{l.stopPropagation(),K(i)},className:"inline-flex items-center h-[30px] px-2.5 rounded-md text-xs font-medium bg-amber-50 text-amber-600 hover:bg-amber-100 transition-colors cursor-pointer",title:"Editar",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),p&&e.jsx("button",{onClick:l=>{l.stopPropagation(),J(i)},className:"inline-flex items-center h-[30px] px-2.5 rounded-md text-xs font-medium bg-red-50 text-red-600 hover:bg-red-100 transition-colors cursor-pointer",title:"Eliminar",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}],[p]);return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-xl font-bold text-text-primary",children:"Reportes Avanzados"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"Generacion y gestion de reportes personalizados"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(k,{label:"Total Reportes",value:H,color:"bg-guinda/10",icon:e.jsx("svg",{className:"w-6 h-6 text-guinda",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx(k,{label:"Generados",value:I,color:"bg-sky-50",icon:e.jsxs("svg",{className:"w-6 h-6 text-sky-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),e.jsx(k,{label:"Aprobados",value:G,color:"bg-emerald-50",icon:e.jsx("svg",{className:"w-6 h-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx(k,{label:"Exportados",value:q,color:"bg-guinda/10",icon:e.jsx("svg",{className:"w-6 h-6 text-guinda",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("button",{onClick:()=>y("mis_reportes"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors cursor-pointer ${f==="mis_reportes"?"bg-guinda text-white shadow-md":"bg-gray-100 text-text-secondary hover:text-text-primary"}`,children:"Mis Reportes"}),e.jsx("button",{onClick:()=>y("predefinidos"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors cursor-pointer ${f==="predefinidos"?"bg-guinda text-white shadow-md":"bg-gray-100 text-text-secondary hover:text-text-primary"}`,children:"Reportes Predefinidos"})]}),f==="mis_reportes"&&e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-semibold text-text-heading",children:"Reportes Personalizados"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(u,{variant:"ghost",onClick:ee,disabled:N.length===0,children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Exportar XLSX"]}),p&&e.jsxs(u,{onClick:$,children:[e.jsxs("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Nuevo Reporte"]})]})]}),F?e.jsxs("div",{className:"flex items-center justify-center py-16 text-text-muted text-sm",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3 text-guinda",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Cargando reportes..."]}):e.jsx(de,{columns:oe,data:N})]}),f==="predefinidos"&&e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-5 mb-4",children:[e.jsx("h2",{className:"text-base font-semibold text-text-heading mb-1",children:"Plantillas de Reportes LGCG"}),e.jsx("p",{className:"text-sm text-text-muted",children:'Seleccione un reporte predefinido para generarlo automaticamente. El reporte se agregara a "Mis Reportes".'})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:be.map(o=>e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-5 flex flex-col justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-guinda/10 flex items-center justify-center text-guinda",children:o.icon}),e.jsx(T,{variant:o.tipo==="financiero"?"info":o.tipo==="presupuestal"?"warning":"success",children:z[o.tipo]})]}),e.jsx("h3",{className:"text-sm font-semibold text-text-heading mb-1.5",children:o.titulo}),e.jsx("p",{className:"text-xs text-text-muted leading-relaxed mb-4",children:o.descripcion})]}),p?e.jsxs(u,{variant:"outline-primary",size:"sm",onClick:()=>U(o),loading:h.isPending,className:"w-full",children:[e.jsxs("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Generar"]}):e.jsx("p",{className:"text-xs text-text-muted text-center italic",children:"Sin permisos de edicion"})]},o.id))})]}),e.jsx(le,{open:D,onClose:v,title:b?"Editar Reporte":"Nuevo Reporte",size:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(B,{label:"Nombre",placeholder:"Nombre del reporte",value:n.nombre,onChange:o=>c("nombre",o.target.value)}),e.jsx(S,{label:"Tipo",placeholder:"Seleccionar tipo...",options:ge,value:n.tipo,onChange:o=>c("tipo",o.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-heading mb-1.5",children:"Descripcion"}),e.jsx("textarea",{rows:3,placeholder:"Descripcion del reporte...",value:n.descripcion,onChange:o=>c("descripcion",o.target.value),className:"block w-full rounded-md border border-border bg-white text-text-heading text-[0.9375rem] px-3.5 py-2.5 placeholder:text-text-muted transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-guinda/25 focus:border-guinda resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(S,{label:"Formato",placeholder:"Seleccionar formato...",options:he,value:n.formato,onChange:o=>c("formato",o.target.value)}),e.jsx(S,{label:"Estado",placeholder:"Seleccionar estado...",options:fe,value:n.estado,onChange:o=>c("estado",o.target.value)}),e.jsx(B,{label:"Fecha Generacion",type:"date",value:n.fecha_generacion,onChange:o=>c("fecha_generacion",o.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-heading mb-1.5",children:"Parametros (JSON)"}),e.jsx("textarea",{rows:3,placeholder:'{"periodo": "mensual", "cuentas": ["1000","2000"]}',value:n.parametros,onChange:o=>c("parametros",o.target.value),className:"block w-full rounded-md border border-border bg-white text-text-heading text-[0.9375rem] px-3.5 py-2.5 placeholder:text-text-muted transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-guinda/25 focus:border-guinda resize-none font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-heading mb-1.5",children:"Notas"}),e.jsx("textarea",{rows:2,placeholder:"Notas adicionales...",value:n.notas,onChange:o=>c("notas",o.target.value),className:"block w-full rounded-md border border-border bg-white text-text-heading text-[0.9375rem] px-3.5 py-2.5 placeholder:text-text-muted transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-guinda/25 focus:border-guinda resize-none"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-3 border-t border-border",children:[e.jsx(u,{variant:"ghost",onClick:v,children:"Cancelar"}),e.jsx(u,{onClick:X,loading:h.isPending||g.isPending,children:b?"Guardar Cambios":"Crear Reporte"})]})]})}),e.jsx(ce,{open:W,onClose:()=>{M(!1),L(null)},onConfirm:Q,title:"Eliminar Reporte",message:`Esta seguro de eliminar el reporte "${E?.nombre}"? Esta accion no se puede deshacer.`,confirmText:"Eliminar",variant:"danger",loading:R.isPending})]})}export{Pe as default};
