import{u as E,m as I,j as e}from"./index-CSPrBd4B.js";import{b}from"./vendor-DEA9Ikep.js";import{u as S,B as f}from"./Button-D3Vrtg19.js";import{u as P,a as C}from"./useReportes-fPI_RkMq.js";import{u as w,a as G}from"./usePresupuesto-COpwhoUS.js";import{a as A}from"./usePatrimonio-DdyJ4fRm.js";import{u as F}from"./useDeuda-omhJD7tr.js";import{u as R}from"./useFondosFederales-1Oo6A25A.js";import{e as i}from"./exportHelpers-CvXmrB4L.js";import"./export-t5FFX7R_.js";import"./supabase-DANKYb0E.js";const _=[{key:"situacion",title:"Estado de Situacion Financiera",desc:"Balance general del ente publico",icon:"balance"},{key:"actividades",title:"Estado de Actividades",desc:"Ingresos y gastos del ejercicio",icon:"activity"},{key:"balanza",title:"Balanza de Comprobacion",desc:"Saldos por cuenta contable",icon:"scale"},{key:"egresos",title:"Presupuesto de Egresos",desc:"Comparativo por momento del gasto",icon:"expense"},{key:"ingresos",title:"Presupuesto de Ingresos",desc:"Comparativo por momento del ingreso",icon:"income"},{key:"deuda",title:"Deuda Publica",desc:"Situacion de la deuda del ente",icon:"debt"},{key:"patrimonio",title:"Bienes Patrimoniales",desc:"Inventario de bienes publicos",icon:"building"},{key:"fondos",title:"Fondos Federales",desc:"Participaciones y aportaciones",icon:"fund"},{key:"indicadores",title:"Indicadores de Gestion",desc:"Indicadores financieros y presupuestales",icon:"chart"}];function T({type:l}){const s={width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5 text-guinda"};switch(l){case"balance":return e.jsxs("svg",{...s,children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.jsx("path",{d:"M3 9h18"}),e.jsx("path",{d:"M9 21V9"})]});case"activity":return e.jsx("svg",{...s,children:e.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})});case"scale":return e.jsxs("svg",{...s,children:[e.jsx("path",{d:"M12 3v18"}),e.jsx("path",{d:"M5 6l7-3 7 3"}),e.jsx("path",{d:"M2 14l3-8 3 8a5.5 5.5 0 01-6 0z"}),e.jsx("path",{d:"M16 14l3-8 3 8a5.5 5.5 0 01-6 0z"})]});case"expense":return e.jsx("svg",{...s,children:e.jsx("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"})});case"income":return e.jsxs("svg",{...s,children:[e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),e.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"})]});case"debt":return e.jsx("svg",{...s,children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})});case"building":return e.jsxs("svg",{...s,children:[e.jsx("path",{d:"M3 21h18"}),e.jsx("path",{d:"M5 21V7l8-4v18"}),e.jsx("path",{d:"M19 21V11l-6-4"}),e.jsx("path",{d:"M9 9v.01M9 12v.01M9 15v.01M9 18v.01"})]});case"fund":return e.jsxs("svg",{...s,children:[e.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2"}),e.jsx("path",{d:"M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"})]});case"chart":return e.jsx("svg",{...s,children:e.jsx("path",{d:"M18 20V10M12 20V4M6 20v-6"})});default:return e.jsxs("svg",{...s,children:[e.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"})]})}}function K(){const{ejercicioFiscal:l}=E(),[x,s]=b.useState(null),{data:m=[]}=S("periodo_contable",{filter:{ejercicio_id:l?.id},order:{column:"numero",ascending:!0}}),u=m.length?m[m.length-1].id:null,{data:c}=P(u),{data:p}=C(u),{data:g=[]}=I(u),{data:n}=w(),{data:r}=G(),{data:h}=F(),{data:j}=A(),{data:y}=R(),d=b.useMemo(()=>{const o=n?.aprobado||0,a=n?.ejercido||0,t=r?.estimado||0,k=r?.recaudado||0;return{pct_gasto:o>0?(a/o*100).toFixed(2):"0.00",pct_ingreso:t>0?(k/t*100).toFixed(2):"0.00",aprobado:o,ejercido:a,estimado:t,recaudado:k}},[n,r]),v=b.useMemo(()=>({situacion:()=>{const o=[...(c?.activo?.cuentas||[]).map(a=>({seccion:"ACTIVO",codigo:a.codigo,nombre:a.nombre,saldo_final:a.saldo_final})),...(c?.pasivo?.cuentas||[]).map(a=>({seccion:"PASIVO",codigo:a.codigo,nombre:a.nombre,saldo_final:a.saldo_final})),...(c?.hacienda?.cuentas||[]).map(a=>({seccion:"HACIENDA",codigo:a.codigo,nombre:a.nombre,saldo_final:a.saldo_final}))];i(o,[{key:"seccion",label:"Seccion"},{key:"codigo",label:"Codigo"},{key:"nombre",label:"Nombre"},{key:"saldo_final",label:"Saldo Final"}],"transparencia_situacion_financiera")},actividades:()=>{const o=[...(p?.ingresos?.cuentas||[]).map(a=>({seccion:"INGRESOS",codigo:a.codigo,nombre:a.nombre,monto:a.monto})),...(p?.gastos?.cuentas||[]).map(a=>({seccion:"GASTOS",codigo:a.codigo,nombre:a.nombre,monto:a.monto}))];i(o,[{key:"seccion",label:"Seccion"},{key:"codigo",label:"Codigo"},{key:"nombre",label:"Nombre"},{key:"monto",label:"Monto"}],"transparencia_actividades")},balanza:()=>{i(g,[{key:"codigo",label:"Codigo"},{key:"nombre",label:"Nombre"},{key:"saldo_inicial",label:"Saldo Inicial"},{key:"total_debe",label:"Debe"},{key:"total_haber",label:"Haber"},{key:"saldo_final",label:"Saldo Final"}],"transparencia_balanza_comprobacion")},egresos:()=>{const o=n?.aprobado||0,a=n?.ejercido||0,t=n?.pagado||0;i([{aprobado:o,ejercido:a,pagado:t}],[{key:"aprobado",label:"Aprobado"},{key:"ejercido",label:"Ejercido"},{key:"pagado",label:"Pagado"}],"transparencia_presupuesto_egresos")},ingresos:()=>{const o=r?.estimado||0,a=r?.recaudado||0;i([{estimado:o,recaudado:a}],[{key:"estimado",label:"Estimado"},{key:"recaudado",label:"Recaudado"}],"transparencia_presupuesto_ingresos")},deuda:()=>{i([h||{}],[{key:"saldo_total",label:"Saldo Total"},{key:"total_instrumentos",label:"Total Instrumentos"}],"transparencia_deuda_publica")},patrimonio:()=>{i([j||{}],[{key:"muebles",label:"Bienes Muebles"},{key:"inmuebles",label:"Bienes Inmuebles"},{key:"intangibles",label:"Bienes Intangibles"},{key:"valor_neto",label:"Valor Neto Total"}],"transparencia_bienes_patrimoniales")},fondos:()=>{i([y||{}],[{key:"participaciones",label:"Participaciones"},{key:"aportaciones",label:"Aportaciones"},{key:"total",label:"Total Fondos"}],"transparencia_fondos_federales")},indicadores:()=>{i([{indicador:"Porcentaje de Gasto Ejercido",valor:`${d.pct_gasto}%`,aprobado:d.aprobado,ejercido:d.ejercido},{indicador:"Porcentaje de Ingreso Recaudado",valor:`${d.pct_ingreso}%`,estimado:d.estimado,recaudado:d.recaudado}],[{key:"indicador",label:"Indicador"},{key:"valor",label:"Valor"},{key:"aprobado",label:"Aprobado"},{key:"ejercido",label:"Ejercido"},{key:"estimado",label:"Estimado"},{key:"recaudado",label:"Recaudado"}],"transparencia_indicadores")}}),[c,p,g,n,r,h,j,y,d]),M=o=>{s(o);try{const a=v[o];a&&a()}finally{setTimeout(()=>s(null),600)}},N=()=>{_.forEach((o,a)=>{setTimeout(()=>{const t=v[o.key];t&&t()},a*300)})};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-xl font-bold text-text-primary",children:"Transparencia"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"Art. 56-59 LGCG â€” Informacion financiera para portales de transparencia"})]}),e.jsx("div",{className:"bg-guinda/5 border border-guinda/20 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-sm text-guinda",children:"Genere los reportes requeridos por la Ley General de Contabilidad Gubernamental para su publicacion en portales de transparencia."})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:_.map(o=>e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-5 flex flex-col",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-guinda/10 flex items-center justify-center flex-shrink-0",children:e.jsx(T,{type:o.icon})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-text-primary",children:o.title}),e.jsx("p",{className:"text-xs text-text-muted mt-0.5",children:o.desc})]})]}),e.jsx("div",{className:"mt-auto pt-3",children:e.jsx(f,{variant:"outline-primary",size:"sm",onClick:()=>M(o.key),loading:x===o.key,className:"w-full",children:"Generar Reporte"})})]},o.key))}),e.jsx("div",{className:"bg-white rounded-lg card-shadow p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-text-primary",children:"Paquete Completo"}),e.jsx("p",{className:"text-xs text-text-muted mt-0.5",children:"Genera todos los reportes de transparencia en archivos Excel individuales"})]}),e.jsx(f,{onClick:N,children:"Generar Paquete Completo de Transparencia"})]})})]})}export{K as default};
