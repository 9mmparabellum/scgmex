import{u as he,A as ue,j as e}from"./index-FiQ-o0as.js";import{b as m}from"./vendor-DEA9Ikep.js";import{u as pe,a as fe,b as be}from"./useAnomalias-Cl_1HvMU.js";import{useCreate as ge,useUpdate as je,useList as W}from"./useCrud--Epse75Z.js";import{Y as w,Z as _,_ as $}from"./constants-CX_We7cr.js";import{D as ve}from"./DataTable-BIXgbPbQ.js";import{M as _e}from"./Modal-nDz351DY.js";import{B as M}from"./Button-CjklDnap.js";import{S}from"./Select-DaQh9AUa.js";import{B as z}from"./Badge-7Bgbyuqr.js";import{e as ye}from"./exportHelpers-CvXmrB4L.js";import{e as ke}from"./exportPdfHelpers-A3uAR0yr.js";import"./supabase-DANKYb0E.js";import"./export-t5FFX7R_.js";const g=r=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(r||0),B=r=>r?new Date(r).toLocaleDateString("es-MX"):"—";function Ne(r){return r.length?r.reduce((x,u)=>x+u,0)/r.length:0}function we(r,x){if(r.length<2)return 0;const u=r.reduce((d,l)=>d+(l-x)**2,0)/r.length;return Math.sqrt(u)}function Me(r=[],x=[],u=[]){const d=[],l=new Date().toISOString(),f=(a,s)=>{const i=u.find(n=>n.tipo===a&&n.activa!==!1);return i?Number(i.umbral):s},c=f("monto_inusual",3),y=x.map(a=>Math.abs(a.monto||a.debe||a.haber||0)).filter(a=>a>0),p=Ne(y),b=we(y,p);b>0&&x.forEach(a=>{const s=Math.abs(a.monto||a.debe||a.haber||0);s>p+c*b&&d.push({tipo:"monto_inusual",nivel_riesgo:s>p+5*b?"critico":"alto",estado:"detectada",descripcion:`Monto inusual de ${g(s)} detectado (media: ${g(p)}, desv: ${g(b)})`,monto:s,cuenta_afectada:a.cuenta_codigo||a.cuenta_id||"",poliza_referencia:a.poliza_id||"",evidencia:`Monto excede ${c} desviaciones estandar de la media`,fecha_deteccion:l})});const j=f("patron_duplicado",7),k={};x.forEach(a=>{const s=Math.abs(a.monto||a.debe||a.haber||0),i=`${a.cuenta_codigo||a.cuenta_id}-${s}`;k[i]||(k[i]=[]),k[i].push(a)}),Object.entries(k).forEach(([,a])=>{if(a.length<2)return;const s=[...a].sort((i,n)=>new Date(i.fecha||i.created_at)-new Date(n.fecha||n.created_at));for(let i=1;i<s.length;i++){const n=(new Date(s[i].fecha||s[i].created_at)-new Date(s[i-1].fecha||s[i-1].created_at))/864e5;if(n<=j&&n>=0){const v=Math.abs(s[i].monto||s[i].debe||s[i].haber||0);d.push({tipo:"patron_duplicado",nivel_riesgo:"medio",estado:"detectada",descripcion:`Movimiento duplicado: misma cuenta y monto ${g(v)} en ${Math.round(n)} dias`,monto:v,cuenta_afectada:s[i].cuenta_codigo||s[i].cuenta_id||"",poliza_referencia:s[i].poliza_id||"",evidencia:`Dos movimientos identicos detectados con ${Math.round(n)} dias de diferencia (umbral: ${j} dias)`,fecha_deteccion:l})}}}),r.forEach(a=>{const s=new Date(a.fecha||a.created_at),i=s.getDay(),n=s.getHours(),v=i===0||i===6,T=n<7||n>20;(v||T)&&d.push({tipo:"horario_sospechoso",nivel_riesgo:"medio",estado:"detectada",descripcion:`Poliza registrada ${v?"en fin de semana":"fuera de horario laboral"} (${B(a.fecha||a.created_at)}, ${n}:00 hrs)`,monto:a.total_debe||a.total||0,cuenta_afectada:"",poliza_referencia:a.id||"",evidencia:v?`Dia ${i===0?"domingo":"sabado"} — transaccion fuera de dias habiles`:`Hora ${n}:00 — fuera de horario laboral (07:00-20:00)`,fecha_deteccion:l})});const C=f("monto_inusual",1e5);x.forEach(a=>{const s=Math.abs(a.monto||a.debe||a.haber||0);s>=C&&s%1e4===0&&d.push({tipo:"monto_inusual",nivel_riesgo:"bajo",estado:"detectada",descripcion:`Monto redondo sospechoso: ${g(s)}`,monto:s,cuenta_afectada:a.cuenta_codigo||a.cuenta_id||"",poliza_referencia:a.poliza_id||"",evidencia:`Monto es multiplo exacto de $10,000 y supera el umbral de ${g(C)}`,fecha_deteccion:l})});const E=f("desviacion_presupuestal",20);r.forEach(a=>{if(a.aprobado&&a.ejercido){const s=(a.ejercido-a.aprobado)/a.aprobado*100;s>E&&d.push({tipo:"desviacion_presupuestal",nivel_riesgo:s>50?"critico":"alto",estado:"detectada",descripcion:`Desviacion presupuestal del ${s.toFixed(1)}% (ejercido ${g(a.ejercido)} vs aprobado ${g(a.aprobado)})`,monto:a.ejercido-a.aprobado,cuenta_afectada:a.partida||"",poliza_referencia:a.id||"",evidencia:`Porcentaje de desviacion: ${s.toFixed(1)}% — umbral permitido: ${E}%`,fecha_deteccion:l})}});const D=f("proveedor_concentrado",40),h={};let A=0;return x.forEach(a=>{if(a.proveedor||a.beneficiario){const s=a.proveedor||a.beneficiario,i=Math.abs(a.monto||a.debe||a.haber||0);h[s]=(h[s]||0)+i,A+=i}}),A>0&&Object.entries(h).forEach(([a,s])=>{const i=s/A*100;i>D&&d.push({tipo:"proveedor_concentrado",nivel_riesgo:i>70?"critico":"alto",estado:"detectada",descripcion:`Concentracion de proveedor: "${a}" con ${i.toFixed(1)}% del total de compras (${g(s)})`,monto:s,cuenta_afectada:"",poliza_referencia:"",evidencia:`Proveedor concentra ${i.toFixed(1)}% — umbral: ${D}%`,fecha_deteccion:l})}),d}function Z({data:r,colorFn:x,height:u=180}){if(!r.length)return e.jsx("p",{className:"text-sm text-text-muted py-8 text-center",children:"Sin datos"});const d=Math.max(...r.map(c=>c.value),1),l=Math.max(28,Math.min(56,400/r.length)),f=r.length*(l+8)+16;return e.jsx("div",{className:"overflow-x-auto",children:e.jsx("svg",{width:f,height:u+40,className:"mx-auto",children:r.map((c,y)=>{const p=c.value/d*u,b=y*(l+8)+8,j=u-p;return e.jsxs("g",{children:[e.jsx("rect",{x:b,y:j,width:l,height:p,rx:4,fill:x?x(c,y):"#9D2449",opacity:.85}),e.jsx("text",{x:b+l/2,y:j-4,textAnchor:"middle",className:"text-[11px] fill-text-heading font-semibold",children:c.value}),e.jsx("text",{x:b+l/2,y:u+16,textAnchor:"middle",className:"text-[10px] fill-text-muted",children:c.shortLabel||c.label})]},c.label)})})})}function O({icon:r,label:x,value:u,sublabel:d,color:l="text-guinda",bgColor:f="bg-guinda/10"}){return e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-5 flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${f} flex items-center justify-center flex-shrink-0`,children:r}),e.jsxs("div",{children:[e.jsx("p",{className:`text-2xl font-bold ${l}`,children:u}),e.jsx("p",{className:"text-sm font-medium text-text-heading",children:x}),d&&e.jsx("p",{className:"text-xs text-text-muted",children:d})]})]})}function Ae(){return e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-guinda",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}function Ie(){const{entePublico:r,ejercicioFiscal:x,rol:u}=he(),d=r?.id,l=x?.id,f=ue(u,"anomalias"),{data:c=[],isLoading:y}=pe(d,l),{data:p}=fe(d,l),b=be(),j=ge("anomalia"),k=je("anomalia"),{data:C=[]}=W("poliza",{filter:{ejercicio_id:l}}),{data:E=[]}=W("movimiento_poliza",{filter:{ejercicio_id:l}}),{data:D=[]}=W("regla_anomalia",{filter:{ente_id:d}}),[h,A]=m.useState({tipo:"",nivel_riesgo:"",estado:""}),a=(t,o)=>A(N=>({...N,[t]:o})),s=()=>A({tipo:"",nivel_riesgo:"",estado:""}),i=Object.values(h).some(Boolean),[n,v]=m.useState(null),[T,L]=m.useState(!1),[F,I]=m.useState(""),[R,V]=m.useState(""),[J,H]=m.useState(!1),[Q,X]=m.useState(!1),ee=p?.total??c.length,G=p?.criticas??c.filter(t=>t.nivel_riesgo==="critico").length,U=p?.altas??c.filter(t=>t.nivel_riesgo==="alto").length,te=p?.enRevision??c.filter(t=>t.estado==="en_revision").length,ae=p?.resueltas??c.filter(t=>t.estado==="resuelta").length,P=m.useMemo(()=>{let t=c;return h.tipo&&(t=t.filter(o=>o.tipo===h.tipo)),h.nivel_riesgo&&(t=t.filter(o=>o.nivel_riesgo===h.nivel_riesgo)),h.estado&&(t=t.filter(o=>o.estado===h.estado)),t},[c,h]),oe=m.useMemo(()=>{const t={};return Object.keys(w).forEach(o=>{t[o]=0}),c.forEach(o=>{t[o.tipo]!==void 0&&t[o.tipo]++}),Object.entries(t).map(([o,N])=>({label:w[o],shortLabel:w[o].split(" ")[0],value:N,key:o})).filter(o=>o.value>0)},[c]),se={bajo:"#03c3ec",medio:"#ffab00",alto:"#ff3e1d",critico:"#9D2449"},ie=m.useMemo(()=>{const t={};return Object.keys(_).forEach(o=>{t[o]=0}),c.forEach(o=>{t[o.nivel_riesgo]!==void 0&&t[o.nivel_riesgo]++}),Object.entries(t).map(([o,N])=>({label:_[o].label,shortLabel:_[o].label,value:N,key:o}))},[c]),ne=m.useMemo(()=>Object.entries(w).map(([t,o])=>({value:t,label:o})),[]),re=m.useMemo(()=>Object.entries(_).map(([t,{label:o}])=>({value:t,label:o})),[]),q=m.useMemo(()=>Object.entries($).map(([t,{label:o}])=>({value:t,label:o})),[]),le=m.useMemo(()=>[{key:"fecha_deteccion",label:"Fecha",width:"110px",render:t=>B(t)},{key:"tipo",label:"Tipo",width:"150px",render:t=>w[t]||t||"—"},{key:"descripcion",label:"Descripcion",render:t=>e.jsx("span",{className:"line-clamp-2 text-sm",children:t||"—"})},{key:"nivel_riesgo",label:"Riesgo",width:"110px",render:t=>{const o=_[t];return e.jsx(z,{variant:o?.variant||"default",children:o?.label||t||"—"})}},{key:"estado",label:"Estado",width:"120px",render:t=>{const o=$[t];return e.jsx(z,{variant:o?.variant||"default",children:o?.label||t||"—"})}},{key:"monto",label:"Monto",width:"130px",render:t=>e.jsx("span",{className:"font-mono text-sm",children:g(t)})},{key:"id",label:"Acciones",width:"80px",sortable:!1,render:(t,o)=>e.jsx(M,{size:"sm",variant:"ghost",onClick:N=>{N.stopPropagation(),K(o)},children:e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})}],[]),K=m.useCallback(t=>{v(t),I(t.estado||"detectada"),V(t.notas||""),L(!0)},[]),ce=m.useCallback(async()=>{if(n?.id){H(!0);try{await k.mutateAsync({id:n.id,estado:F,notas:R}),L(!1)}finally{H(!1)}}},[n,F,R,k]),de=m.useCallback(async()=>{if(!(!d||!l)){X(!0);try{await b.mutateAsync({enteId:d,ejercicioId:l})}catch{const t=Me(C,E,D);for(const o of t)await j.mutateAsync({...o,ente_id:d,ejercicio_id:l})}finally{X(!1)}}},[d,l,b,C,E,D,j]),Y=[{key:"fecha_deteccion",label:"Fecha",getValue:t=>B(t.fecha_deteccion)},{key:"tipo",label:"Tipo",getValue:t=>w[t.tipo]||t.tipo},{key:"descripcion",label:"Descripcion"},{key:"nivel_riesgo",label:"Nivel Riesgo",getValue:t=>_[t.nivel_riesgo]?.label||t.nivel_riesgo},{key:"estado",label:"Estado",getValue:t=>$[t.estado]?.label||t.estado},{key:"monto",label:"Monto"},{key:"cuenta_afectada",label:"Cuenta Afectada"},{key:"poliza_referencia",label:"Poliza Referencia"}],xe=()=>{ye(P,Y,"anomalias_detectadas")},me=()=>{ke(P,Y,"anomalias_detectadas",{title:"Deteccion de Anomalias (IA)",subtitle:`Ejercicio Fiscal ${x?.anio||""}`,ente:r?.nombre||""})};return y?e.jsx(Ae,{}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-text-primary",children:"Deteccion de Anomalias (IA)"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"Motor de deteccion de patrones anomalos en operaciones contables y presupuestales"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline-secondary",size:"sm",onClick:xe,children:[e.jsxs("svg",{className:"w-4 h-4 mr-1.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Excel"]}),e.jsxs(M,{variant:"outline-secondary",size:"sm",onClick:me,children:[e.jsxs("svg",{className:"w-4 h-4 mr-1.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),"PDF"]}),f&&e.jsxs(M,{onClick:de,loading:Q,children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Ejecutar Analisis"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(O,{icon:e.jsxs("svg",{className:"w-6 h-6 text-guinda",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),label:"Total Anomalias",value:ee,sublabel:"detectadas este periodo",color:"text-guinda",bgColor:"bg-guinda/10"}),e.jsx(O,{icon:e.jsxs("svg",{className:"w-6 h-6 text-danger",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),label:"Criticas + Altas",value:G+U,sublabel:`${G} criticas, ${U} altas`,color:"text-danger",bgColor:"bg-danger/10"}),e.jsx(O,{icon:e.jsxs("svg",{className:"w-6 h-6 text-[#e09600]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),label:"En Revision",value:te,sublabel:"pendientes de analisis",color:"text-[#e09600]",bgColor:"bg-[#ffab00]/10"}),e.jsx(O,{icon:e.jsxs("svg",{className:"w-6 h-6 text-[#56ca00]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),label:"Resueltas",value:ae,sublabel:"anomalias resueltas",color:"text-[#56ca00]",bgColor:"bg-[#71dd37]/10"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-heading mb-4",children:"Anomalias por Tipo"}),e.jsx(Z,{data:oe,colorFn:()=>"#9D2449"})]}),e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-heading mb-4",children:"Anomalias por Nivel de Riesgo"}),e.jsx(Z,{data:ie,colorFn:t=>se[t.key]||"#9D2449"})]})]}),e.jsx("div",{className:"bg-white rounded-lg card-shadow p-4 mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsx(S,{label:"Tipo",options:ne,value:h.tipo,onChange:t=>a("tipo",t.target.value),placeholder:"Todos los tipos"}),e.jsx(S,{label:"Nivel de Riesgo",options:re,value:h.nivel_riesgo,onChange:t=>a("nivel_riesgo",t.target.value),placeholder:"Todos los niveles"}),e.jsx(S,{label:"Estado",options:q,value:h.estado,onChange:t=>a("estado",t.target.value),placeholder:"Todos los estados"}),e.jsx("div",{className:"flex items-end",children:i&&e.jsx(M,{variant:"ghost",size:"sm",onClick:s,children:"Limpiar filtros"})})]})}),e.jsx("div",{className:"bg-white rounded-lg card-shadow p-5",children:e.jsx(ve,{columns:le,data:P,onRowClick:K})}),e.jsx(_e,{open:T,onClose:()=>L(!1),title:"Detalle de Anomalia",size:"lg",children:n&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{variant:_[n.nivel_riesgo]?.variant||"default",children:_[n.nivel_riesgo]?.label||n.nivel_riesgo}),e.jsx(z,{variant:"primary",children:w[n.tipo]||n.tipo}),e.jsx(z,{variant:$[n.estado]?.variant||"default",children:$[n.estado]?.label||n.estado})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-heading mb-1.5",children:"Descripcion"}),e.jsx("p",{className:"text-[0.9375rem] text-text-primary bg-[#f9fafb] rounded-md p-3",children:n.descripcion||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-heading mb-1.5",children:"Evidencia"}),e.jsx("p",{className:"text-[0.9375rem] text-text-primary bg-[#f9fafb] rounded-md p-3",children:n.evidencia||"—"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-heading mb-1.5",children:"Cuenta Afectada"}),e.jsx("p",{className:"text-[0.9375rem] text-text-primary font-mono bg-[#f9fafb] rounded-md p-3",children:n.cuenta_afectada||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-heading mb-1.5",children:"Poliza Referencia"}),e.jsx("p",{className:"text-[0.9375rem] text-text-primary font-mono bg-[#f9fafb] rounded-md p-3",children:n.poliza_referencia||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-heading mb-1.5",children:"Monto"}),e.jsx("p",{className:"text-[0.9375rem] text-text-primary font-mono font-semibold bg-[#f9fafb] rounded-md p-3",children:g(n.monto)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-heading mb-1.5",children:"Fecha Deteccion"}),e.jsx("p",{className:"text-[0.9375rem] text-text-primary bg-[#f9fafb] rounded-md p-3",children:B(n.fecha_deteccion)})]})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-border pt-4",children:e.jsx(S,{label:"Cambiar Estado",options:q,value:F,onChange:t=>I(t.target.value)})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-heading mb-1.5",children:"Notas"}),e.jsx("textarea",{className:"block w-full rounded-md border border-border bg-white text-text-heading text-[0.9375rem] px-3.5 py-2.5 placeholder:text-text-muted transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-guinda/25 focus:border-guinda min-h-[80px]",rows:3,value:R,onChange:t=>V(t.target.value),placeholder:"Agregar notas sobre esta anomalia..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-border pt-4",children:[e.jsx(M,{variant:"ghost",onClick:()=>L(!1),children:"Cancelar"}),e.jsx(M,{onClick:ce,loading:J,children:"Guardar Cambios"})]})]})]})})]})}export{Ie as default,Me as detectarAnomalias};
