import{j as t}from"./index-FiQ-o0as.js";import{b as h}from"./vendor-DEA9Ikep.js";function v(e,i="id",l="padre_id"){const n={},r=[];return e.forEach(s=>{n[s[i]]={...s,children:[]}}),e.forEach(s=>{s[l]&&n[s[l]]?n[s[l]].children.push(n[s[i]]):r.push(n[s[i]])}),r}function x({node:e,level:i=0,renderNode:l,onSelect:n,selectedId:r,matchingIds:s}){const[d,c]=h.useState(i<2),o=e.children&&e.children.length>0,a=r!=null&&e.id===r;return s&&!s.has(e.id)?null:t.jsxs("div",{children:[t.jsxs("div",{className:["flex items-center py-1.5 px-2 rounded-lg cursor-pointer transition-colors text-sm group",a?"bg-primary/10 text-primary font-medium":"text-text-primary hover:bg-bg-hover"].join(" "),style:{paddingLeft:`${i*16+8}px`},onClick:()=>{o&&c(u=>!u),n?.(e)},children:[t.jsx("span",{className:"w-5 h-5 flex items-center justify-center flex-shrink-0 mr-1",children:o?t.jsx("svg",{className:`w-3.5 h-3.5 text-text-muted transition-transform duration-150 ${d?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}):t.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-border"})}),t.jsx("div",{className:"flex-1 min-w-0 truncate",children:l?l(e):t.jsx("span",{children:e.label??e.name??e.id})})]}),o&&d&&t.jsx("div",{children:e.children.map(u=>t.jsx(x,{node:u,level:i+1,renderNode:l,onSelect:n,selectedId:r,matchingIds:s},u.id))})]})}function f(e,i){i.add(e.id),e.children&&e.children.forEach(l=>f(l,i))}function p(e,i,l=[]){const n=new Set;for(const r of e){const d=[r.label,r.name,r.code,r.id].filter(Boolean).join(" ").toLowerCase().includes(i);let c=!1;if(r.children&&r.children.length>0){const o=p(r.children,i,[...l,r.id]);o.size>0&&(c=!0,o.forEach(a=>n.add(a)))}(d||c)&&(n.add(r.id),l.forEach(o=>n.add(o)),d&&r.children&&r.children.forEach(o=>f(o,n)))}return n}function b({data:e=[],renderNode:i,onSelect:l,selectedId:n,searchable:r=!0}){const[s,d]=h.useState(""),c=h.useMemo(()=>s.trim()?p(e,s.toLowerCase()):null,[e,s]),o=c===null||c.size>0;return t.jsxs("div",{className:"w-full",children:[r&&t.jsx("div",{className:"mb-3",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-text-muted",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t.jsx("input",{type:"text",placeholder:"Buscar...",value:s,onChange:a=>d(a.target.value),className:"block w-full rounded-lg border border-border bg-bg-input text-text-primary text-sm pl-10 pr-3 py-2 placeholder:text-text-muted focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-colors"})]})}),t.jsx("div",{className:"space-y-0.5",children:o?e.map(a=>t.jsx(x,{node:a,level:0,renderNode:i,onSelect:l,selectedId:n,matchingIds:c},a.id)):t.jsxs("div",{className:"text-center py-8 text-text-muted text-sm",children:["Sin resultados para “",s,"”"]})})]})}export{b as T,v as b};
