import{s as i,u as d,o as s}from"./index-CPaKNtDw.js";async function y(e,o){const{data:t,error:c}=await i.from("proyecto_obra").select("*").eq("ente_id",e).eq("ejercicio_id",o).order("nombre");if(c)throw c;return t}async function m(e){const{data:o,error:t}=await i.from("proyecto_obra").select("*").eq("id",e).single();if(t)throw t;return o}async function l(e){const{data:o,error:t}=await i.from("estimacion_obra").select("*").eq("proyecto_id",e).order("numero");if(t)throw t;return o}async function b(e,o){const[t,c]=await Promise.all([i.from("proyecto_obra").select("id, monto_contratado, estado, avance_fisico").eq("ente_id",e).eq("ejercicio_id",o),i.from("estimacion_obra").select("id, monto, estado, proyecto_id").eq("ente_id",e).eq("ejercicio_id",o)]),a=t.data||[],u=c.data||[];return{totalProyectos:a.length,montoContratado:a.reduce((r,n)=>r+Number(n.monto_contratado||0),0),avanceFisicoPromedio:a.length>0?a.reduce((r,n)=>r+Number(n.avance_fisico||0),0)/a.length:0,enProceso:a.filter(r=>r.estado==="en_proceso").length,totalEstimaciones:u.length,montoEstimaciones:u.reduce((r,n)=>r+Number(n.monto||0),0)}}function _(){const{entePublico:e,ejercicioFiscal:o}=d();return s({queryKey:["proyectos_obra",e?.id,o?.id],queryFn:()=>y(e.id,o.id),enabled:!!e?.id&&!!o?.id})}function q(e){return s({queryKey:["proyecto_obra",e],queryFn:()=>m(e),enabled:!!e})}function p(e){return s({queryKey:["estimaciones_obra",e],queryFn:()=>l(e),enabled:!!e})}function h(){const{entePublico:e,ejercicioFiscal:o}=d();return s({queryKey:["resumen_obra_publica",e?.id,o?.id],queryFn:()=>b(e.id,o.id),enabled:!!e?.id&&!!o?.id})}export{_ as a,q as b,p as c,h as u};
