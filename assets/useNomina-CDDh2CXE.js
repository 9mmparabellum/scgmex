import{s as i,u as d,o as r}from"./index-w8y8owqO.js";async function l(e){const{data:o,error:n}=await i.from("empleado").select("*").eq("ente_id",e).order("numero_empleado");if(n)throw n;return o}async function m(e,o){const{data:n,error:t}=await i.from("tabulador").select("*").eq("ente_id",e).eq("ejercicio_id",o).order("nivel");if(t)throw t;return n}async function p(e){const{data:o,error:n}=await i.from("concepto_nomina").select("*").eq("ente_id",e).order("clave");if(n)throw n;return o}async function f(e,o){const{data:n,error:t}=await i.from("nomina_periodo").select("*").eq("ente_id",e).eq("ejercicio_id",o).order("numero_quincena",{ascending:!1});if(t)throw t;return n}async function _(e){const{data:o,error:n}=await i.from("nomina_detalle").select("*, empleado:empleado!empleado_id(numero_empleado, nombre), concepto:concepto_nomina!concepto_nomina_id(clave, nombre, tipo)").eq("nomina_periodo_id",e).order("empleado_id");if(n)throw n;return o}async function y(e,o){const[n,t]=await Promise.all([i.from("empleado").select("id, estado").eq("ente_id",e),i.from("nomina_periodo").select("total_percepciones, total_deducciones, total_neto, estado").eq("ente_id",e).eq("ejercicio_id",o)]),u=n.data||[],s=t.data||[];return{totalEmpleados:u.filter(a=>a.estado==="activo").length,totalQuincenas:s.length,totalPercepciones:s.reduce((a,c)=>a+Number(c.total_percepciones||0),0),totalDeducciones:s.reduce((a,c)=>a+Number(c.total_deducciones||0),0),totalNeto:s.reduce((a,c)=>a+Number(c.total_neto||0),0)}}function b(){const{entePublico:e}=d();return r({queryKey:["empleados",e?.id],queryFn:()=>l(e.id),enabled:!!e?.id})}function h(){const{entePublico:e,ejercicioFiscal:o}=d();return r({queryKey:["tabulador",e?.id,o?.id],queryFn:()=>m(e.id,o.id),enabled:!!e?.id&&!!o?.id})}function N(){const{entePublico:e}=d();return r({queryKey:["conceptos_nomina",e?.id],queryFn:()=>p(e.id),enabled:!!e?.id})}function w(){const{entePublico:e,ejercicioFiscal:o}=d();return r({queryKey:["nomina_periodos",e?.id,o?.id],queryFn:()=>f(e.id,o.id),enabled:!!e?.id&&!!o?.id})}function F(e){return r({queryKey:["nomina_detalle",e],queryFn:()=>_(e),enabled:!!e})}function P(){const{entePublico:e,ejercicioFiscal:o}=d();return r({queryKey:["resumen_nomina",e?.id,o?.id],queryFn:()=>y(e.id,o.id),enabled:!!e?.id&&!!o?.id})}export{b as a,h as b,N as c,w as d,F as e,P as u};
