import{u as E,j as e}from"./index-xuYioy8Y.js";import{b as c}from"./vendor-DEA9Ikep.js";import{R as j}from"./constants-B0qHiDNt.js";import{e as m}from"./exportHelpers-CvXmrB4L.js";import"./supabase-DANKYb0E.js";import"./export-t5FFX7R_.js";const i=r=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(r||0),n=r=>Number(r||0).toFixed(1)+"%",f={primary:"bg-guinda/10 text-guinda",success:"bg-emerald-50 text-emerald-600",warning:"bg-amber-50 text-amber-600",danger:"bg-red-50 text-red-600",info:"bg-sky-50 text-sky-600",default:"bg-gray-100 text-gray-600"};function N({children:r,variant:s="default"}){return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f[s]||f.default}`,children:r})}function I({value:r,color:s="bg-guinda"}){const l=Math.min(Math.max(r,0),100);return e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`${s} h-3 rounded-full transition-all duration-500`,style:{width:`${l}%`}})}),e.jsx("span",{className:"text-xs font-medium text-gray-600 w-12 text-right",children:n(l)})]})}function g({value:r}){return r>0?e.jsxs("span",{className:"inline-flex items-center text-emerald-600 font-medium text-sm",title:"Incremento",children:[e.jsx("svg",{className:"w-4 h-4 mr-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),n(Math.abs(r))]}):r<0?e.jsxs("span",{className:"inline-flex items-center text-red-600 font-medium text-sm",title:"Decremento",children:[e.jsx("svg",{className:"w-4 h-4 mr-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),n(Math.abs(r))]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}function $(){return[{indicador:"Ingresos Totales",anterior:452e5,actual:4875e4},{indicador:"Gastos Totales",anterior:428e5,actual:441e5},{indicador:"Balance Presupuestal",anterior:24e5,actual:465e4},{indicador:"Saldo Bancos",anterior:125e5,actual:142e5},{indicador:"CxC Total",anterior:32e5,actual:28e5},{indicador:"CxP Total",anterior:51e5,actual:47e5},{indicador:"Deuda Total",anterior:18e6,actual:165e5}].map(s=>{const l=s.actual-s.anterior,x=s.anterior?l/s.anterior*100:0;return{...s,variacion:l,variacionPct:x}})}function A(){return[{indicador:"Recaudacion de Ingresos Propios",meta:15e6,resultado:132e5},{indicador:"Ejecucion del Gasto",meta:42e6,resultado:441e5},{indicador:"Ahorro Presupuestal",meta:3e6,resultado:465e4},{indicador:"Reduccion de Deuda",meta:2e6,resultado:15e5},{indicador:"Cobranza de CxC",meta:5e6,resultado:42e5},{indicador:"Inversion Publica",meta:8e6,resultado:76e5},{indicador:"Gasto Corriente / Ingreso",meta:70,resultado:65.2,isPct:!0},{indicador:"Autonomia Financiera",meta:40,resultado:38.5,isPct:!0}].map(r=>{const s=r.resultado-r.meta,l=r.meta?r.resultado/r.meta*100:0;return{...r,desviacion:s,cumplimiento:l}})}function T(){return[{ente:"Municipio Centro",ingresos:4875e4,gastos:441e5,balance:465e4,deuda:165e5},{ente:"Municipio Norte",ingresos:321e5,gastos:312e5,balance:9e5,deuda:82e5},{ente:"Municipio Sur",ingresos:284e5,gastos:291e5,balance:-7e5,deuda:121e5},{ente:"Municipio Este",ingresos:198e5,gastos:185e5,balance:13e5,deuda:54e5},{ente:"Municipio Oeste",ingresos:226e5,gastos:231e5,balance:-5e5,deuda:98e5}]}function G(){return[{periodo:"2021",ingresos:382e5,gastos:378e5,balance:4e5,deuda:22e6},{periodo:"2022",ingresos:405e5,gastos:392e5,balance:13e5,deuda:205e5},{periodo:"2023",ingresos:431e5,gastos:418e5,balance:13e5,deuda:192e5},{periodo:"2024",ingresos:452e5,gastos:428e5,balance:24e5,deuda:18e6},{periodo:"2025",ingresos:4875e4,gastos:441e5,balance:465e4,deuda:165e5}]}function H(){const{ejercicioFiscal:r}=E(),[s,l]=c.useState("periodo"),[x,u]=c.useState(!1),p=c.useMemo(()=>$(),[]),b=c.useMemo(()=>A(),[]),y=c.useMemo(()=>T(),[]),h=c.useMemo(()=>G(),[]),v=()=>{const a=r?.anio||"actual";s==="periodo"?m(p,[{label:"Indicador",key:"indicador"},{label:"Periodo Anterior",getValue:t=>t.anterior},{label:"Periodo Actual",getValue:t=>t.actual},{label:"Variacion ($)",getValue:t=>t.variacion},{label:"Variacion (%)",getValue:t=>Number(t.variacionPct).toFixed(1)}],`Benchmarking_Periodo_${a}`):s==="indicador"?m(b,[{label:"Indicador",key:"indicador"},{label:"Meta",getValue:t=>t.isPct?n(t.meta):t.meta},{label:"Resultado",getValue:t=>t.isPct?n(t.resultado):t.resultado},{label:"Desviacion",getValue:t=>t.isPct?n(t.desviacion):t.desviacion},{label:"Cumplimiento (%)",getValue:t=>Number(t.cumplimiento).toFixed(1)}],`Benchmarking_Indicadores_${a}`):s==="ente"?m(y,[{label:"Ente",key:"ente"},{label:"Ingresos",key:"ingresos"},{label:"Gastos",key:"gastos"},{label:"Balance",key:"balance"},{label:"Deuda",key:"deuda"}],`Benchmarking_Entes_${a}`):s==="historico"&&m(h,[{label:"Periodo",key:"periodo"},{label:"Ingresos",key:"ingresos"},{label:"Gastos",key:"gastos"},{label:"Balance",key:"balance"},{label:"Deuda",key:"deuda"}],`Benchmarking_Historico_${a}`)},k=()=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Indicador"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Periodo Anterior"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Periodo Actual"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Variacion ($)"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Variacion (%)"}),e.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"Tendencia"})]})}),e.jsx("tbody",{children:p.map((a,t)=>e.jsxs("tr",{className:`border-b border-gray-100 ${t%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:a.indicador}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-600",children:i(a.anterior)}),e.jsx("td",{className:"py-3 px-4 text-right font-medium text-gray-900",children:i(a.actual)}),e.jsx("td",{className:`py-3 px-4 text-right font-medium ${a.variacion>=0?"text-emerald-600":"text-red-600"}`,children:i(a.variacion)}),e.jsx("td",{className:`py-3 px-4 text-right font-medium ${a.variacionPct>=0?"text-emerald-600":"text-red-600"}`,children:n(a.variacionPct)}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx(g,{value:a.variacionPct})})]},a.indicador))})]})}),P=()=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Indicador"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Meta"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Resultado"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Desviacion"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-gray-700 w-48",children:"Cumplimiento"})]})}),e.jsx("tbody",{children:b.map((a,t)=>{const o=a.cumplimiento>=100?"bg-emerald-500":a.cumplimiento>=80?"bg-amber-500":"bg-red-500";return e.jsxs("tr",{className:`border-b border-gray-100 ${t%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:a.indicador}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-600",children:a.isPct?n(a.meta):i(a.meta)}),e.jsx("td",{className:"py-3 px-4 text-right font-medium text-gray-900",children:a.isPct?n(a.resultado):i(a.resultado)}),e.jsx("td",{className:`py-3 px-4 text-right font-medium ${a.desviacion>=0?"text-emerald-600":"text-red-600"}`,children:a.isPct?n(a.desviacion):i(a.desviacion)}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(I,{value:a.cumplimiento,color:o})})]},a.indicador)})})]})}),V=()=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Ente"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Ingresos"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Gastos"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Balance"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Deuda"}),e.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"Estado"})]})}),e.jsx("tbody",{children:y.map((a,t)=>e.jsxs("tr",{className:`border-b border-gray-100 ${t%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:a.ente}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-600",children:i(a.ingresos)}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-600",children:i(a.gastos)}),e.jsx("td",{className:`py-3 px-4 text-right font-medium ${a.balance>=0?"text-emerald-600":"text-red-600"}`,children:i(a.balance)}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-600",children:i(a.deuda)}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx(N,{variant:a.balance>=0?"success":"danger",children:a.balance>=0?"Superavit":"Deficit"})})]},a.ente))})]})}),M=()=>{const a=h.map((t,o)=>{const d=o>0?h[o-1]:null,D=d&&d.ingresos?(t.ingresos-d.ingresos)/d.ingresos*100:null,B=d&&d.gastos?(t.gastos-d.gastos)/d.gastos*100:null;return{...t,ingVar:D,gasVar:B}});return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Periodo"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Ingresos"}),e.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"Var."}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Gastos"}),e.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"Var."}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Balance"}),e.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Deuda"})]})}),e.jsx("tbody",{children:a.map((t,o)=>e.jsxs("tr",{className:`border-b border-gray-100 ${o%2===0?"bg-white":"bg-gray-50/50"}`,children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:t.periodo}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-900",children:i(t.ingresos)}),e.jsx("td",{className:"py-3 px-4 text-center",children:t.ingVar!==null?e.jsx(g,{value:t.ingVar}):e.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-900",children:i(t.gastos)}),e.jsx("td",{className:"py-3 px-4 text-center",children:t.gasVar!==null?e.jsx(g,{value:t.gasVar}):e.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),e.jsx("td",{className:`py-3 px-4 text-right font-medium ${t.balance>=0?"text-emerald-600":"text-red-600"}`,children:i(t.balance)}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-600",children:i(t.deuda)})]},t.periodo))})]})})},C={periodo:"Compara indicadores financieros clave entre el periodo actual y el anterior.",ente:"Compara metricas financieras entre diferentes entes publicos.",indicador:"Evalua el cumplimiento de indicadores contra las metas establecidas.",historico:"Muestra la evolucion de indicadores financieros a lo largo del tiempo."};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-5",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Benchmarking Financiero"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Analisis comparativo de indicadores financieros"})]}),e.jsx("div",{className:"bg-white rounded-lg card-shadow p-5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4",children:[e.jsxs("div",{className:"flex-1 max-w-xs",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1.5",children:"Tipo de Comparacion"}),e.jsx("select",{value:s,onChange:a=>{l(a.target.value),u(!1)},className:"w-full h-[40px] rounded-md border border-border px-3 text-[0.9375rem] focus:outline-none focus:ring-2 focus:ring-guinda/25 focus:border-guinda bg-white",children:Object.entries(j).map(([a,t])=>e.jsx("option",{value:a,children:t},a))})]}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:C[s]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>u(!0),className:"h-[38px] px-5 rounded-md bg-guinda text-white text-sm font-medium hover:bg-guinda/90 transition-colors",children:"Generar Analisis"}),x&&e.jsx("button",{onClick:v,className:"h-[38px] px-4 rounded-md border border-gray-300 text-gray-700 text-sm font-medium hover:bg-gray-50 transition-colors",children:"Exportar Excel"})]})]})}),x?e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900",children:j[s]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Ejercicio fiscal: ",r?.anio||"N/A"]})]}),e.jsx(N,{variant:"primary",children:"Datos de demostracion"})]}),s==="periodo"&&k(),s==="indicador"&&P(),s==="ente"&&V(),s==="historico"&&M(),e.jsx("div",{className:"mt-5 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-400",children:[e.jsx("span",{children:"Los datos mostrados son de demostracion para visualizar la funcionalidad"}),s==="periodo"&&e.jsx("span",{className:"ml-auto",children:"Valores positivos indican incremento respecto al periodo anterior"}),s==="indicador"&&e.jsx("span",{className:"ml-auto",children:"Barras verdes = cumplimiento al 100%+, amarillas = 80-99%, rojas = menos de 80%"})]})})]}):e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-12 text-center",children:[e.jsx("div",{className:"text-gray-300 mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-600",children:"Selecciona el tipo de analisis"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Elige una comparacion y haz clic en "Generar Analisis" para ver los resultados'})]})]})}export{H as default};
