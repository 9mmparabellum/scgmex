import{s as d,u as s,o as n}from"./index-xuYioy8Y.js";async function l(e,i){const{data:c,error:t}=await d.from("cfdi_emitido").select("*").eq("ente_id",e).eq("ejercicio_id",i).order("fecha_emision",{ascending:!1});if(t)throw t;return c}async function f(e,i){const{data:c,error:t}=await d.from("cfdi_recibido").select("*").eq("ente_id",e).eq("ejercicio_id",i).order("fecha_recepcion",{ascending:!1});if(t)throw t;return c}async function m(e,i){const[c,t]=await Promise.all([d.from("cfdi_emitido").select("id, subtotal, total, estado").eq("ente_id",e).eq("ejercicio_id",i),d.from("cfdi_recibido").select("id, subtotal, total, estado").eq("ente_id",e).eq("ejercicio_id",i)]),a=c.data||[],u=t.data||[];return{totalEmitidos:a.length,montoEmitidos:a.filter(o=>o.estado!=="cancelado").reduce((o,r)=>o+Number(r.total||0),0),totalRecibidos:u.length,montoRecibidos:u.filter(o=>o.estado!=="cancelado").reduce((o,r)=>o+Number(r.total||0),0)}}function _(){const{entePublico:e,ejercicioFiscal:i}=s();return n({queryKey:["cfdi_emitidos",e?.id,i?.id],queryFn:()=>l(e.id,i.id),enabled:!!e?.id&&!!i?.id})}function q(){const{entePublico:e,ejercicioFiscal:i}=s();return n({queryKey:["cfdi_recibidos",e?.id,i?.id],queryFn:()=>f(e.id,i.id),enabled:!!e?.id&&!!i?.id})}function y(){const{entePublico:e,ejercicioFiscal:i}=s();return n({queryKey:["resumen_cfdi",e?.id,i?.id],queryFn:()=>m(e.id,i.id),enabled:!!e?.id&&!!i?.id})}export{_ as a,q as b,y as u};
