import{j as e}from"./index-w8y8owqO.js";import{u as p,a as u,F as h}from"./useCFDI-CZXEi1Ed.js";import{B as d}from"./Badge-CBnEW2x0.js";import"./vendor-DEA9Ikep.js";import"./supabase-DANKYb0E.js";import"./export-t5FFX7R_.js";const g=s=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(s||0);function F(){const{data:s={},isLoading:r}=p(),{data:t,isLoading:o}=u(),l=s.totalEmitidos||0,n=s.montoEmitidos||0,c=s.totalRecibidos||0,m=s.montoRecibidos||0,x=s.timbrados||0,i=h.isSandbox(),b=[{label:"Total Emitidos",value:l,isMoney:!1},{label:"Monto Emitidos",value:n,isMoney:!0},{label:"Total Recibidos",value:c,isMoney:!1},{label:"Monto Recibidos",value:m,isMoney:!0}];return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-text-primary",children:"Comprobantes Fiscales Digitales (CFDI)"}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"Gestion de CFDI emitidos y recibidos del ente publico"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsx(d,{variant:"warning",children:"Sandbox"}),e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg card-shadow px-3 py-2",children:[e.jsx("span",{className:"text-xs text-text-muted",children:"PAC Facturama:"}),o?e.jsx("span",{className:"text-xs text-text-muted",children:"Verificando..."}):t?.connected?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-[#56ca00] inline-block"}),e.jsx("span",{className:"text-xs font-medium text-[#56ca00]",children:"Conectado"}),t.rfc&&e.jsxs("span",{className:"text-xs text-text-muted ml-1",children:["RFC: ",t.rfc]}),!t.hasCsd&&e.jsx(d,{variant:"danger",children:"Sin CSD"})]}):e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-[#e0360a] inline-block"}),e.jsx("span",{className:"text-xs font-medium text-[#e0360a]",children:"Desconectado"})]})]})]})]}),t?.connected&&!t.hasCsd&&e.jsx("div",{className:"bg-[#e0360a]/10 border border-[#e0360a]/30 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-[#e0360a] mt-0.5 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-[#e0360a]",children:"CSD no configurado - Timbrado no disponible"}),e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["Para timbrar CFDI, suba su Certificado de Sello Digital (CSD) en el"," ",e.jsx("a",{href:i?"https://sandbox.facturama.mx":"https://facturama.mx",target:"_blank",rel:"noreferrer",className:"text-guinda underline",children:"dashboard de Facturama"})," ","→ Perfil Fiscal → Carga de Sellos Digitales.",i&&e.jsxs("span",{className:"block mt-1",children:["Para sandbox, descargue los"," ",e.jsx("a",{href:"https://cdnfacturama.azureedge.net/content/csd-pruebas.zip",target:"_blank",rel:"noreferrer",className:"text-guinda underline",children:"CSD de prueba"})," ","(password: 12345678a). Use RFC de prueba como EKU9003173C9."]})]})]})]})}),!1,r?e.jsx("div",{className:"flex items-center justify-center py-16 text-text-muted text-sm",children:"Cargando resumen de CFDI..."}):e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[b.map(a=>e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-4",children:[e.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mb-1",children:a.label}),e.jsx("p",{className:"text-lg font-bold text-text-primary",children:a.isMoney?g(a.value):a.value})]},a.label)),e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-4",children:[e.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mb-1",children:"Timbrados"}),e.jsx("p",{className:"text-lg font-bold text-[#56ca00]",children:x})]})]}),e.jsxs("div",{className:"bg-white rounded-lg card-shadow p-5",children:[e.jsx("h2",{className:"text-sm font-semibold text-text-secondary mb-3",children:"Acerca del Modulo"}),e.jsx("p",{className:"text-sm text-text-muted leading-relaxed",children:"El modulo de Comprobantes Fiscales Digitales por Internet (CFDI) permite gestionar los comprobantes fiscales emitidos y recibidos por el ente publico, incluyendo el registro, consulta y control de estado de cada comprobante conforme a las disposiciones fiscales vigentes del SAT. Integra timbrado CFDI 4.0 via PAC Facturama."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"border border-border rounded-md p-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-primary mb-1",children:"Emitidos"}),e.jsx("p",{className:"text-xs text-text-muted",children:"CFDI emitidos por el ente publico a terceros, con control de serie, folio y UUID."})]}),e.jsxs("div",{className:"border border-border rounded-md p-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-primary mb-1",children:"Recibidos"}),e.jsx("p",{className:"text-xs text-text-muted",children:"CFDI recibidos de proveedores y prestadores de servicios, con seguimiento de pago."})]}),e.jsxs("div",{className:"border border-border rounded-md p-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-primary mb-1",children:"Timbrado PAC"}),e.jsx("p",{className:"text-xs text-text-muted",children:"Timbrado CFDI 4.0 via Facturama, cancelacion ante el SAT y descarga de XML/PDF."})]})]})]})]})}export{F as default};
